<!DOCTYPE html>
<html lang="en">
<style>
    body {
        font-family: Arial;
    }

    /* Style the tab */
    .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

    /* Style the buttons inside the tab */
    .tab button {
        background-color: inherit;
        float: left;
        border: none;
        outline: none;
        cursor: pointer;
        padding: 14px 16px;
        transition: 0.3s;
        font-size: 17px;
    }

    /* Change background color of buttons on hover */
    .tab button:hover {
        background-color: #ddd;
    }

    /* Create an active/current tablink class */
    .tab button.active {
        background-color: #ccc;
    }

    /* Style the tab content */
    .tabcontent {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }

    select {
        color: black;
    }

    select.item-select {
        width: 150px;
        /*background-color: #ccccff;*/
    }

    select.weapon-select {
        width: 225px;
        /*background-color: #ccccff;*/
    }

    option:checked {
        color: #000066;
        background-color: #b3c6ff;
    }

    select.enchant-select {
        width: 100px;
    }

    .run_sim_button {
        background-color: #4CAF50;
        border: none;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        width: 600px;
        height: 60px;
    }

    /* Change background color of buttons on hover */
    .run_sim_button:hover {
        background-color: #adebad;
    }

    .collapsible {
        background-color: #777;
        color: white;
        cursor: pointer;
        padding: 18px;
        width: 666px;
        height: 60px;
        border: 1px solid black;
        text-align: center;
        outline: none;
        font-size: 15px;
    }

    .collapsible:hover {
        background-color: #555;
    }

    .content {
        padding: 18px;
        display: none;
        overflow-y: scroll;
        max-height: 480px;
        width: 630px;
        background-color: #d9d9d9;
    }

    .loader div {
        border: 16px solid #f3f3f3; /* Light grey */
        border-top: 16px solid #003300; /* Blue */
        border-radius: 50%;
        width: 120px;
        height: 120px;
        animation: spin 2s linear infinite;
    }

    p.select-title {
        display: inline;
        font-size: 22px;
        font-weight: bold;
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(0deg);
        }
        75% {
            transform: rotate(-180deg);
        }
        100% {
            transform: rotate(0deg);
        }
    }

    div.scroll {
        margin: 4px;
        padding: 4px;
        background-color: black;
        color: white;
        width: 600px;
        height: 400px;
        overflow-x: auto;
        text-align: justify;
    }

    div.description {
        margin-left: 25px;
    }

    div.hide_description {
    }

    .left_select {
        position: relative;
        left: 00px;
        /*margin-left: -0px;*/
    }

    .middle_select {
        position: relative;
        left: 124px;
        /*margin-left: -50px;*/
    }

    .right_select {
        position: relative;
        left: 240px;
        /*margin-left: 50px;*/
    }

    .icon {
        width: 36px;
        height: 36px;
        position: relative;
        margin: 1px;
        user-select: none;
        border: 2px solid #fcfff9;
        display: inline-block;
        vertical-align: top;
        cursor: pointer;
        transition: border-color .2s ease-in;
    }

    .icon:before {
        content: attr(data-disp);
        position: absolute;
        right: -4px;
        bottom: -4px;
        background: #000;
        border: 1px solid #ccc;
        border-radius: 5px;
        text-align: center;
        z-index: 3;
        font-size: 11px;
        padding: 1px 3px;
        color: #7fffb6;
    }

    .icon:after {
        content: "";
        width: 39px;
        height: 39px;
        position: absolute;
        left: 0;
        top: 0;
        border-radius: 4px;
    }

    .results_table {
        /*display: inline-block;*/
        /*border-right: thin solid #404040;*/
    }

    .talents {
        display: inline-block;
        border-right: thin solid #404040;
    }

    .checkbox_div {
        vertical-align: top;
        display: inline-block;
    }

    .tooltip {
        position: relative;
        display: inline-block;
        border-bottom: 1px dotted black;
    }

    .tooltip .tooltiptext {
        visibility: hidden;
        width: 120px;
        background-color: #555;
        color: #fff;
        text-align: center;
        border-radius: 6px;
        padding: 5px 0;
        position: absolute;
        z-index: 1;
        bottom: 125%;
        left: 50%;
        margin-left: -60px;
        opacity: 0;
        transition: opacity 0.3s;
    }

    .tooltip .tooltiptext::after {
        content: "";
        position: absolute;
        top: 100%;
        left: 50%;
        margin-left: -5px;
        border-width: 5px;
        border-style: solid;
        border-color: #555 transparent transparent transparent;
    }

    .tooltip:hover .tooltiptext {
        visibility: visible;
        opacity: 1;
    }

    .tooltipicon {
        width: 35px;
        height: 35px;
        position: relative;
        margin: 3px;
        user-select: none;
        border: 1px solid #525252;
        display: inline-block;
        vertical-align: top;
        cursor: pointer;
        transition: border-color .2s ease-in;
    }
</style>

<head>
    <title>wow fury sim</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="emscripten/website/wasm_interface.js"></script>
    <script src="js/talents.js"></script>
    <script src="js/load_presets.js"></script>
    <meta name="site_description" content="WoW Classic simulator for Fury Warriors">
</head>

<h1>wow fury sim</h1>

<body style="background-color:#bfbfbf;"
      onload="openTab('event', 'Simulator');open_armor();show_div('cleave_if_adds', 'cleave_div');
      show_div('use_hamstring', 'hamstring_div');show_div('multi_target_mode', 'multi_target_div');
      show_div('periodic_damage', 'periodic_damage_div');show_div('ability_queue', 'ability_queue_div');
      show_div('dual_wield_mode', 'dual_wield_div');displayTalentBootup();calcTotalTalents();load_talent_standard_fury();">

<div class="tab">
    <button class="tablinks" onclick="openTab(event, 'Simulator')">Simulator</button>
    <button class="tablinks" onclick="openTab(event, 'Discord')">Discord/Patch-notes</button>
    <button class="tablinks" onclick="openTab(event, 'About')">About</button>
</div>

<div id="Discord" class="tabcontent">
    <h2>Welcome to wow-fury-sim!</h2>
    If you like my simulator feel free to join my <b>Discord</b>:
    <h3><a href="https://discord.gg/xTuKsRz">Discord link</a></h3>
    There you can discuss your results, get notifications when a <b>new patch</b> goes live, read the <b>patch-notes</b>,
    <br>
    or, if you have some good ideas, you can contribute to the <b>wish-list</b>.<br>
</div>

<div id="About" class="tabcontent">
    <h2>Welcome to my fury simulator!</h2>
    <h3><a href="https://github.com/albinoyoda/wow_classic_simulator">Github link</a></h3>
    The project is open-source and can be found on github. <br>
    If you have ideas of what you think is missing/would be nice to have join my <a href="https://discord.gg/xTuKsRz">Discord.</a>
    <h3>FAQ:</h3>
    <p><b>Q: Is this a spreadsheet? How does it work? </b></p>
    <p> A: No, this is not a spreadsheet. This is an actual simulator with world of warcraft classic mechanics.<br>
        When the "Run simulator" button is pressed, a character is created, wearing the items, weapons, buffs, and<br>
        enchants specified by the drop down menus and checkboxes. Then the following values, which are used <br>
        in the simulator, are computed:<br>
        - Total attack power<br>
        - Weapon skill<br>
        - Hit chance<br>
        - Haste rating<br>
        - Weapons extra hit probability<br>
        - Damage multipliers<br><br>
        Where the hit and crit are used to create the following hit tables:<br>
        - Main-hand white-hit table<br>
        - Off-hand white-hit table<br>
        - Two-hand white-hit table (queried for the off-hand when a heroic strike is queued)<br>
        - Yellow-hit table<br><br>
        Then a combat phase starts, where X independent fights are simulated. Here the characters weapons will<br>
        start to swing towards a target, where white and yellow hits are generated by drawing random samples<br>
        from the hit-tables. Rage will be generated and spent on abilities following a configurable ability-policy.<br>
        The DPS can then be computed as the average value of the DPS in these simulations. Furthermore, since the<br>
        DPS from the simulations approximate a gaussian distribution, one can readily compute the error margins <br>
        of the expected value (confidence interval). This is crucial in order to draw conclusions from the results.<br>
    </p>
    <p><b>Q: Whats the difference between a simulator and a spreadsheet?</b></p>
    <p>A: A spreadsheet performs no simulations, instead it consists of a mash-up of expected values, where<br>
        white-hit damage, rage, yellow hits, etc., are modelled. But, since these depend on discrete events, such<br>
        as cooldowns, flurry charges, rage-capping, swing timer resets (extra hit), the models will be approximate<br>
        and might thus lack crucial details. I believe people have done a great effort in developing such models,<br>
        but from the forementioned reasons they will never be as accurate as a simulator!<br>
    </p>
    <p><b>Q: What equations are used in this simulator?</b></p>
    <p>A: The tables for crit, hit, glancing hits, and weapon skill have all been based on the results presented in<br>
        the <a href="https://github.com/magey/classic-warrior/wiki/Attack-table">Attack table</a> github.<br>
        Their models have been verified on classic servers, and I can strongly recommend to check it out.<br>
    </p>
    <p><b>Q: The DPS in the simulator is much higher than what I usually get when I raid. What is wrong?</b></p>
    <p>A: The simulator follows the specified ability rotation with perfect execution,<br>
        meaning it does 0 misstakes, 0 missclicks and has near perfect timing with all of its cooldowns.<br>
        Furthermore, so does all of it's "raid members", where fearie fire, curse of recklessness,<br>
        and sunder armor are assumed to be applied instantly as the fight begins and have no downtime. The bot also<br>
        does not wait for the tank to build threat.<br>
    </p>
    <p><b>Q: Wow, I really love the webdesign from the 90's! </b></p>
    <p>A: Said no one ever...<br>
        The reason why this page looks to have a target audience in their 50's is that I have very limited<br>
        experience with any web based programming languages. I found something that I understood and stuck to that.<br>
        And it works, hey! However, the C++ based simulator and the derivation/interpretation of the results should<br>
        be of higher quality, since they are closed to my field of expertise<br>
    </p>
</div>

<div id="Simulator" class="tabcontent">

    <p class="select-title">Load config from file:</p><br>
    <input type="file" id="myFile" name="filename" accept=".txt">
    <input type="submit" onclick="load_file()"><br><br>

    <p class="select-title">Save config to file:</p><br>
    <button onclick="save_button()">Save current config</button>
    <br><br>

    <button type="button" class="collapsible" id="armor_n_wep">Armor and Weapons</button>
    <div class="content">
        <div id="armor_single">
            <p class="select-title">Quick-select:</p><br>
            <button onclick="load_p1prebis()">P1 "pre-BiS"</button>
            <button onclick="load_p3pvebis()">P3 PvE-BiS</button>
            <button onclick="load_p4pvebis()">P4 PvE-BiS</button>
            <button onclick="load_p5pvebis()">P5 PvE-BiS</button>
            <button onclick="load_p6pvebis()">P6 PvE-BiS</button>
            <br><br>
            <!--armor begin1-->
            <span class="left_select">helmet</span><span class="middle_select">neck</span><span class="right_select">shoulder</span><br>
            <select id="helmet_dd" class="item-select">
                <option value="none" selected disabled></option>
                <option value="circlet_of_restless_dreams"> Circlet of Restless Dreams</option>
                <option value="conquerors_crown"> Conquerors Crown</option>
                <option value="crown_of_destruction"> Crown of Destruction</option>
                <option value="dreadnaught_helmet"> Dreadnaught Helmet</option>
                <option value="expert_goldminers_head"> Expert Goldminers Head</option>
                <option value="eye_of_rend"> Eye of Rend</option>
                <option value="fury_visor"> Fury Visor</option>
                <option value="helm_of_domination"> Helm of Domination</option>
                <option value="helm_of_endless_rage"> Helm of Endless Rage</option>
                <option value="helm_of_heroism"> Helm of Heroism</option>
                <option value="helm_of_the_executioner"> Helm of the Executioner</option>
                <option value="helm_of_valor"> Helm of Valor</option>
                <option value="helm_of_wrath"> Helm of Wrath</option>
                <option value="icebane_helmet"> Icebane Helmet</option>
                <option value="icy_scale_coif"> Icy Scale Coif</option>
                <option value="lionheart_helm"> Lionheart Helm</option>
                <option value="mask_of_the_unforgiven"> Mask of the Unforgiven</option>
                <option value="r10_commanders_plate_helm"> R10 Commanders Plate Helm</option>
                <option value="r13_plate_helm"> R13 Plate Helm</option>
                <option value="raging_berserkers_helm"> Raging Berserkers Helm</option>
            </select>

            <select id="neck_dd" class="item-select">
                <option value="none" selected disabled></option>
                <option value="amulet_of_the_darkmoon"> Amulet of the Darkmoon</option>
                <option value="barbed_choker"> Barbed Choker</option>
                <option value="beads_of_ogre_might"> Beads of Ogre Might</option>
                <option value="choker_of_the_shifting_sands"> Choker of the Shifting Sands</option>
                <option value="emberfury_talisman"> Emberfury Talisman</option>
                <option value="fury_of_the_forgotten_swarm"> Fury of the Forgotten Swarm</option>
                <option value="imperial_jewel"> Imperial Jewel</option>
                <option value="mark_of_fordring"> Mark of Fordring</option>
                <option value="onyxia_tooth_pendant"> Onyxia Tooth Pendant</option>
                <option value="pendant_of_the_qiraji_guardian"> Pendant of the Qiraji Guardian</option>
                <option value="prestors_talisman_of_connivery"> Prestors Talisman of Connivery</option>
                <option value="sadists_collar"> Sadists Collar</option>
                <option value="stormrages_talisman_of_seething"> Stormrages Talisman of Seething</option>
                <option value="the_eye_of_hakkar"> The Eye of Hakkar</option>
            </select>

            <select id="shoulder_dd" class="item-select">
                <option value="none" selected disabled></option>
                <option value="abyssal_plate_epaulets"> Abyssal Plate Epaulets</option>
                <option value="black_dragonscale_shoulders"> Black Dragonscale Shoulders</option>
                <option value="bloadsoaked_pauldrons"> Bloadsoaked Pauldrons</option>
                <option value="chitinous_shoulderguards"> Chitinous Shoulderguards</option>
                <option value="conquerors_spaulders"> Conquerors Spaulders</option>
                <option value="defilers_plate_spaulders"> Defilers Plate Spaulders</option>
                <option value="drake_talon_pauldrons"> Drake Talon Pauldrons</option>
                <option value="dreadnaught_pauldrons"> Dreadnaught Pauldrons</option>
                <option value="flamescarred_shoulders"> Flamescarred Shoulders</option>
                <option value="icebane_pauldrons"> Icebane Pauldrons</option>
                <option value="mantle_of_wicked_revenge"> Mantle of Wicked Revenge</option>
                <option value="pauldrons_of_might"> Pauldrons of Might</option>
                <option value="pauldrons_of_the_unrelenting"> Pauldrons of the Unrelenting</option>
                <option value="pauldrons_of_wrath"> Pauldrons of Wrath</option>
                <option value="r10_commanders_plate_shoulders"> R10 Commanders Plate Shoulders</option>
                <option value="r13_plate_shoulderguards"> R13 Plate Shoulderguards</option>
                <option value="razorsteel_shoulders"> Razorsteel Shoulders</option>
                <option value="spaulders_of_heroism"> Spaulders of Heroism</option>
                <option value="spaulders_of_valor"> Spaulders of Valor</option>
                <option value="taut_dragonhide_shoulderpads"> Taut Dragonhide Shoulderpads</option>
                <option value="truestrike_shoulders"> Truestrike Shoulders</option>
                <option value="wyrmhide_spaulders"> Wyrmhide Spaulders</option>
            </select>

            <p></p>

            <span class="left_select">back</span><span class="middle_select">chest</span><span class="right_select">wrists</span><br>
            <select id="back_dd" class="item-select">
                <option value="none" selected disabled></option>
                <option value="blackveil_cloak"> Blackveil Cloak</option>
                <option value="cape_of_the_black_baron"> Cape of the Black Baron</option>
                <option value="cloak_of_concentrated_hate"> Cloak of Concentrated Hate</option>
                <option value="cloak_of_draconic_might"> Cloak of Draconic Might</option>
                <option value="cloak_of_firemaw"> Cloak of Firemaw</option>
                <option value="cloak_of_the_fallen_god"> Cloak of the Fallen God</option>
                <option value="cloak_of_the_golden_hive"> Cloak of the Golden Hive</option>
                <option value="cloak_of_the_scourge"> Cloak of the Scourge</option>
                <option value="cloak_of_the_shrouded_mists"> Cloak of the Shrouded Mists</option>
                <option value="deathguards_cloak"> Deathguards Cloak</option>
                <option value="drape_of_unyielding_strength"> Drape of Unyielding Strength</option>
                <option value="might_of_the_tribe"> Might of the Tribe</option>
                <option value="puissant_cape"> Puissant Cape</option>
                <option value="shifting_cloak"> Shifting Cloak</option>
                <option value="shroud_of_dominion"> Shroud of Dominion</option>
                <option value="stoneskin_gargoyle_cape"> Stoneskin Gargoyle Cape</option>
                <option value="windshear_cape"> Windshear Cape</option>
                <option value="zulian_tigerhide_cloak"> Zulian Tigerhide Cloak</option>
            </select>

            <select id="chest_dd" class="item-select">
                <option value="none" selected disabled></option>
                <option value="black_dragonscale_chest"> Black Dragonscale Chest</option>
                <option value="bloodsoul_breastplate"> Bloodsoul Breastplate</option>
                <option value="breastplate_of_annihilation"> Breastplate of Annihilation</option>
                <option value="breastplate_of_bloodthirst"> Breastplate of Bloodthirst</option>
                <option value="breastplate_of_heroism"> Breastplate of Heroism</option>
                <option value="breastplate_of_the_chromatic_flight"> Breastplate of the Chromatic Flight</option>
                <option value="breastplate_of_undead_slaying"> Breastplate of Undead Slaying</option>
                <option value="breastplate_of_valor"> Breastplate of Valor</option>
                <option value="breastplate_of_wrath"> Breastplate of Wrath</option>
                <option value="cadaverous_armor"> Cadaverous Armor</option>
                <option value="conquerors_breastplate"> Conquerors Breastplate</option>
                <option value="deathdealer_breastplate"> Deathdealer Breastplate</option>
                <option value="dreadnaught_breastplate"> Dreadnaught Breastplate</option>
                <option value="ghoul_skin_tunic"> Ghoul Skin Tunic</option>
                <option value="icebane_breastplate"> Icebane Breastplate</option>
                <option value="icy_scale_breastplate"> Icy Scale Breastplate</option>
                <option value="malfurions_blessed_bulwark"> Malfurions Blessed Bulwark</option>
                <option value="obsidian_mail_tunic"> Obsidian Mail Tunic</option>
                <option value="ogre_forged_hauberk"> Ogre Forged Hauberk</option>
                <option value="plated_abomination_ribcage"> Plated Abomination Ribcage</option>
                <option value="polar_tunic"> Polar Tunic</option>
                <option value="r13_plate_armor"> R13 Plate Armor</option>
                <option value="r8_plate_hauberk"> R8 Plate Hauberk</option>
                <option value="runed_bloodstaind_hauberk"> Runed Bloodstaind Hauberk</option>
                <option value="savage_gladiator_chain"> Savage Gladiator Chain</option>
                <option value="tombstone_breastplate"> Tombstone Breastplate</option>
                <option value="vest_of_swift_execution"> Vest of Swift Execution</option>
                <option value="zandalar_vindicators_breastplate"> Zandalar Vindicators Breastplate</option>
            </select>

            <select id="wrists_dd" class="item-select">
                <option value="none" selected disabled></option>
                <option value="abyssal_plate_vambraces"> Abyssal Plate Vambraces</option>
                <option value="battleborn_armbraces"> Battleborn Armbraces</option>
                <option value="berserker_bracers"> Berserker Bracers</option>
                <option value="blinkstrike"> Blinkstrike</option>
                <option value="bracelets_of_wrath"> Bracelets of Wrath</option>
                <option value="bracers_of_brutality"> Bracers of Brutality</option>
                <option value="bracers_of_heroism"> Bracers of Heroism</option>
                <option value="bracers_of_undead_slaying"> Bracers of Undead Slaying</option>
                <option value="deeprock_bracers"> Deeprock Bracers</option>
                <option value="dreadnaught_bracers"> Dreadnaught Bracers</option>
                <option value="hive_defiler_wristguards"> Hive Defiler Wristguards</option>
                <option value="icebane_bracers"> Icebane Bracers</option>
                <option value="icy_scale_bracers"> Icy Scale Bracers</option>
                <option value="polar_bracers"> Polar Bracers</option>
                <option value="qiraji_execution_bracers"> Qiraji Execution Bracers</option>
                <option value="vambraces_of_the_sadist"> Vambraces of the Sadist</option>
                <option value="wristguards_of_stability"> Wristguards of Stability</option>
                <option value="wristguards_of_true_flight"> Wristguards of True Flight</option>
                <option value="wristguards_of_vengeance"> Wristguards of Vengeance</option>
                <option value="zandalar_armguards"> Zandalar Armguards</option>
            </select>

            <p></p>

            <span class="left_select">hands</span><span class="middle_select">belt</span><span
                class="right_select">legs</span><br>
            <select id="hands_dd" class="item-select">
                <option value="none" selected disabled></option>
                <option value="aged_core_leather_gloves"> Aged Core Leather Gloves</option>
                <option value="bloodmail_gauntlets"> Bloodmail Gauntlets</option>
                <option value="devilsaur_gauntlets"> Devilsaur Gauntlets</option>
                <option value="dreadnaught_gauntlets"> Dreadnaught Gauntlets</option>
                <option value="edgemasters_handguards"> Edgemasters Handguards</option>
                <option value="flameguard_gauntlets"> Flameguard Gauntlets</option>
                <option value="gauntlets_of_annihilation"> Gauntlets of Annihilation</option>
                <option value="gauntlets_of_heroism"> Gauntlets of Heroism</option>
                <option value="gauntlets_of_might"> Gauntlets of Might</option>
                <option value="gauntlets_of_steadfast_determination"> Gauntlets of Steadfast Determination</option>
                <option value="gauntlets_of_undead_slaying"> Gauntlets of Undead Slaying</option>
                <option value="gauntlets_of_valor"> Gauntlets of Valor</option>
                <option value="gauntlets_of_wrath"> Gauntlets of Wrath</option>
                <option value="gloves_of_enforcement"> Gloves of Enforcement</option>
                <option value="icebane_gauntlets"> Icebane Gauntlets</option>
                <option value="icy_scale_gauntlets"> Icy Scale Gauntlets</option>
                <option value="polar_gloves"> Polar Gloves</option>
                <option value="r12_plate_gauntlets"> R12 Plate Gauntlets</option>
                <option value="r7_plate_gauntlets"> R7 Plate Gauntlets</option>
                <option value="reiver_claws"> Reiver Claws</option>
                <option value="sacrificial_gauntlets"> Sacrificial Gauntlets</option>
            </select>

            <select id="belt_dd" class="item-select">
                <option value="none" selected disabled></option>
                <option value="belt_of_heroism"> Belt of Heroism</option>
                <option value="belt_of_never_ending_agony"> Belt of Never Ending Agony</option>
                <option value="belt_of_preserved_heads"> Belt of Preserved Heads</option>
                <option value="belt_of_wrath"> Belt of Wrath</option>
                <option value="brigam_girdle"> Brigam Girdle</option>
                <option value="defilers_plate_girdle"> Defilers Plate Girdle</option>
                <option value="dreadnaught_waistguard"> Dreadnaught Waistguard</option>
                <option value="frostbite_girdle"> Frostbite Girdle</option>
                <option value="frostwolf_plate_belt"> Frostwolf Plate Belt</option>
                <option value="girdle_of_the_fallen_crusader"> Girdle of the Fallen Crusader</option>
                <option value="girdle_of_the_mentor"> Girdle of the Mentor</option>
                <option value="muggers_belt"> Muggers Belt</option>
                <option value="omokks_girth_restrainer"> Omokks Girth Restrainer</option>
                <option value="onslaught_girdle"> Onslaught Girdle</option>
                <option value="therazanes_link"> Therazanes Link</option>
                <option value="triad_girdle"> Triad Girdle</option>
                <option value="unmelting_ice_girdle"> Unmelting Ice Girdle</option>
                <option value="zandalar_vindicators_belt"> Zandalar Vindicators Belt</option>
            </select>

            <select id="legs_dd" class="item-select">
                <option value="none" selected disabled></option>
                <option value="WSG_plate_legguards"> Wsg Plate Legguards</option>
                <option value="abyssal_plate_legplates"> Abyssal Plate Legplates</option>
                <option value="black_dragonscale_leggings"> Black Dragonscale Leggings</option>
                <option value="blademaster_leggings"> Blademaster Leggings</option>
                <option value="bloodsoaked_legplates"> Bloodsoaked Legplates</option>
                <option value="cloudkeeper_legplates"> Cloudkeeper Legplates</option>
                <option value="cloudkeeper_legplates_no_use"> Cloudkeeper Legplates No Use</option>
                <option value="conquerors_legguards"> Conquerors Legguards</option>
                <option value="dark_heart_pants"> Dark Heart Pants</option>
                <option value="devilsaur_leggings"> Devilsaur Leggings</option>
                <option value="dreadnaughts_legplates"> Dreadnaughts Legplates</option>
                <option value="eldritch_legplates"> Eldritch Legplates</option>
                <option value="handcrafted_mastersmith_leggings"> Handcrafted Mastersmith Leggings</option>
                <option value="icebane_leggings"> Icebane Leggings</option>
                <option value="icy_scale_leggings"> Icy Scale Leggings</option>
                <option value="leggings_of_apocalypse"> Leggings of Apocalypse</option>
                <option value="leggings_of_carnage"> Leggings of Carnage</option>
                <option value="legguards_of_the_fallen_crusader"> Legguards of the Fallen Crusader</option>
                <option value="legplates_of_heroism"> Legplates of Heroism</option>
                <option value="legplates_of_the_qiraji_command"> Legplates of the Qiraji Command</option>
                <option value="legplates_of_valor"> Legplates of Valor</option>
                <option value="legplates_of_wrath"> Legplates of Wrath</option>
                <option value="r12_plate_legguards"> R12 Plate Legguards</option>
                <option value="r8_plate_leggings"> R8 Plate Leggings</option>
                <option value="scaled_sand_reaver_leggings"> Scaled Sand Reaver Leggings</option>
                <option value="titanic_leggings"> Titanic Leggings</option>
            </select>

            <p></p>

            <span class="left_select">boots</span><span class="middle_select">ring1</span><span class="right_select">ring2</span><br>
            <select id="boots_dd" class="item-select">
                <option value="none" selected disabled></option>
                <option value="battlechasers_greaves"> Battlechasers Greaves</option>
                <option value="black_dragonscale_boots"> Black Dragonscale Boots</option>
                <option value="blooddrenched_footpads"> Blooddrenched Footpads</option>
                <option value="bloodmail_boots"> Bloodmail Boots</option>
                <option value="boots_of_heroism"> Boots of Heroism</option>
                <option value="boots_of_the_fallen_hero"> Boots of the Fallen Hero</option>
                <option value="boots_of_the_shadow_flame"> Boots of the Shadow Flame</option>
                <option value="boots_of_the_vanguard"> Boots of the Vanguard</option>
                <option value="chromatic_boots"> Chromatic Boots</option>
                <option value="conquerors_greaves"> Conquerors Greaves</option>
                <option value="defilers_plate_greaves"> Defilers Plate Greaves</option>
                <option value="dreadnaughts_sabatons"> Dreadnaughts Sabatons</option>
                <option value="r12_plate_boots"> R12 Plate Boots</option>
                <option value="r7_greaves"> R7 Greaves</option>
                <option value="sabatons_of_wrath"> Sabatons of Wrath</option>
                <option value="sapphirons_scale_boots"> Sapphirons Scale Boots</option>
                <option value="slime_kickers"> Slime Kickers</option>
                <option value="windreaver_greaves"> Windreaver Greaves</option>
            </select>

            <select id="ring1_dd" class="item-select">
                <option value="none" selected disabled></option>
                <option value="band_of_accuria"> Band of Accuria</option>
                <option value="band_of_earthen_might"> Band of Earthen Might</option>
                <option value="band_of_jin"> Band of Jin</option>
                <option value="band_of_reanimation"> Band of Reanimation</option>
                <option value="band_of_the_ogre_king"> Band of the Ogre King</option>
                <option value="band_of_unnatural_forces"> Band of Unnatural Forces</option>
                <option value="blackstone_ring"> Blackstone Ring</option>
                <option value="circle_of_applied_force"> Circle of Applied Force</option>
                <option value="don_julios_band"> Don Julios Band</option>
                <option value="magnis_will"> Magnis Will</option>
                <option value="masons_fraternity_ring"> Masons Fraternity Ring</option>
                <option value="master_dragonslayers_ring"> Master Dragonslayers Ring</option>
                <option value="might_of_cenarius"> Might of Cenarius</option>
                <option value="painweaver_band"> Painweaver Band</option>
                <option value="quick_strike_ring"> Quick Strike Ring</option>
                <option value="ring_of_fury"> Ring of Fury</option>
                <option value="ring_of_the_dreadnaught"> Ring of the Dreadnaught</option>
                <option value="ring_of_the_god_slayer"> Ring of the God Slayer</option>
                <option value="ring_of_the_qiraji_fury"> Ring of the Qiraji Fury</option>
                <option value="seal_of_jin"> Seal of Jin</option>
                <option value="seal_of_the_gurubashi_berserker"> Seal of the Gurubashi Berserker</option>
                <option value="signet_of_the_bronze_dragonflight"> Signet of the Bronze Dragonflight</option>
                <option value="signet_of_the_fallen_defender"> Signet of the Fallen Defender</option>
                <option value="signet_of_unyielding_strength"> Signet of Unyielding Strength</option>
                <option value="tarnished_elven_ring"> Tarnished Elven Ring</option>
            </select>

            <select id="ring2_dd" class="item-select">
                <option value="none" selected disabled></option>
                <option value="band_of_accuria"> Band of Accuria</option>
                <option value="band_of_earthen_might"> Band of Earthen Might</option>
                <option value="band_of_jin"> Band of Jin</option>
                <option value="band_of_reanimation"> Band of Reanimation</option>
                <option value="band_of_the_ogre_king"> Band of the Ogre King</option>
                <option value="band_of_unnatural_forces"> Band of Unnatural Forces</option>
                <option value="blackstone_ring"> Blackstone Ring</option>
                <option value="circle_of_applied_force"> Circle of Applied Force</option>
                <option value="don_julios_band"> Don Julios Band</option>
                <option value="magnis_will"> Magnis Will</option>
                <option value="masons_fraternity_ring"> Masons Fraternity Ring</option>
                <option value="master_dragonslayers_ring"> Master Dragonslayers Ring</option>
                <option value="might_of_cenarius"> Might of Cenarius</option>
                <option value="painweaver_band"> Painweaver Band</option>
                <option value="quick_strike_ring"> Quick Strike Ring</option>
                <option value="ring_of_fury"> Ring of Fury</option>
                <option value="ring_of_the_dreadnaught"> Ring of the Dreadnaught</option>
                <option value="ring_of_the_god_slayer"> Ring of the God Slayer</option>
                <option value="ring_of_the_qiraji_fury"> Ring of the Qiraji Fury</option>
                <option value="seal_of_jin"> Seal of Jin</option>
                <option value="seal_of_the_gurubashi_berserker"> Seal of the Gurubashi Berserker</option>
                <option value="signet_of_the_bronze_dragonflight"> Signet of the Bronze Dragonflight</option>
                <option value="signet_of_the_fallen_defender"> Signet of the Fallen Defender</option>
                <option value="signet_of_unyielding_strength"> Signet of Unyielding Strength</option>
                <option value="tarnished_elven_ring"> Tarnished Elven Ring</option>
            </select>

            <p></p>

            <span class="left_select">trinket1</span><span class="middle_select">trinket2</span><span
                class="right_select">ranged</span><br>
            <select id="trinket1_dd" class="item-select">
                <option value="none" selected disabled></option>
                <option value="badge_of_the_swarmguard"> Badge of the Swarmguard</option>
                <option value="blackhands_breadth"> Blackhands Breadth</option>
                <option value="counterattack_lodestone"> Counterattack Lodestone</option>
                <option value="darkmoon_card_maelstrom"> Darkmoon Card Maelstrom</option>
                <option value="diamond_flask"> Diamond Flask</option>
                <option value="drake_fang_talisman"> Drake Fang Talisman</option>
                <option value="earthstrike"> Earthstrike</option>
                <option value="hand_of_justice"> Hand of Justice</option>
                <option value="jom_gabbar"> Jom Gabbar</option>
                <option value="kiss_of_the_spider"> Kiss of the Spider</option>
                <option value="mark_of_the_champion"> Mark of the Champion</option>
                <option value="rune_of_the_guard_captain"> Rune of the Guard Captain</option>
                <option value="seal_of_the_dawn"> Seal of the Dawn</option>
                <option value="slayers_crest"> Slayers Crest</option>
            </select>

            <select id="trinket2_dd" class="item-select">
                <option value="none" selected disabled></option>
                <option value="badge_of_the_swarmguard"> Badge of the Swarmguard</option>
                <option value="blackhands_breadth"> Blackhands Breadth</option>
                <option value="counterattack_lodestone"> Counterattack Lodestone</option>
                <option value="darkmoon_card_maelstrom"> Darkmoon Card Maelstrom</option>
                <option value="diamond_flask"> Diamond Flask</option>
                <option value="drake_fang_talisman"> Drake Fang Talisman</option>
                <option value="earthstrike"> Earthstrike</option>
                <option value="hand_of_justice"> Hand of Justice</option>
                <option value="jom_gabbar"> Jom Gabbar</option>
                <option value="kiss_of_the_spider"> Kiss of the Spider</option>
                <option value="mark_of_the_champion"> Mark of the Champion</option>
                <option value="rune_of_the_guard_captain"> Rune of the Guard Captain</option>
                <option value="seal_of_the_dawn"> Seal of the Dawn</option>
                <option value="slayers_crest"> Slayers Crest</option>
            </select>

            <select id="ranged_dd" class="item-select">
                <option value="none" selected disabled></option>
                <option value="blastershot"> Blastershot</option>
                <option value="bloodseeker"> Bloodseeker</option>
                <option value="bow_of_taut_sinew"> Bow of Taut Sinew</option>
                <option value="crossbow_of_imminent_doom"> Crossbow of Imminent Doom</option>
                <option value="dragonbreath_hand_cannon"> Dragonbreath Hand Cannon</option>
                <option value="gurubashi_dwarf_destroyer"> Gurubashi Dwarf Destroyer</option>
                <option value="heartseeking_crossbow"> Heartseeking Crossbow</option>
                <option value="heartstriker"> Heartstriker</option>
                <option value="huhurans_stinger"> Huhurans Stinger</option>
                <option value="larvae_of_the_great_worm"> Larvae of the Great Worm</option>
                <option value="nerubian_slavemaker"> Nerubian Slavemaker</option>
                <option value="precisely_calibrated_boomstick"> Precisely Calibrated Boomstick</option>
                <option value="riphook"> Riphook</option>
                <option value="satyrs_bow"> Satyrs Bow</option>
                <option value="soulstring"> Soulstring</option>
                <option value="strikers_mark"> Strikers Mark</option>
                <option value="toxin_injector"> Toxin Injector</option>
            </select>

            <p></p>

            <!--armor stop1-->
            <p></p>

            <p class="select-title">Select weapons:</p><br>
            <input type="checkbox" id="dual_wield_mode" checked
                   onclick="unique_checkboxes('dual_wield_mode', ['dual_wield_mode', 'two_hand_mode']);
                        unique_div(['dual_wield_div'],['two_hand_div'])">
            <label for="dual_wield_mode"> <b>Dual Wield</b></label>

            <input type="checkbox" id="two_hand_mode" onclick="unique_checkboxes('two_hand_mode', ['dual_wield_mode', 'two_hand_mode']);
                        unique_div(['two_hand_div'],['dual_wield_div'])">
            <label for="two_hand_mode"> <b>Two Hand</b></label><br>

            <div id="dual_wield_div" style="display:none">
                <!--armor begin2-->
                <select id="main_hand_dd" class="weapon-select">
                    <option value="none" selected disabled></option>
                    <option value="none" disabled> --- SWORDS ---</option>
                    <option value="ancient_qiraji_ripper"> Ancient Qiraji Ripper</option>
                    <option value="argent_avenger"> Argent Avenger</option>
                    <option value="assassination_blade"> Assassination Blade</option>
                    <option value="blackguard"> Blackguard</option>
                    <option value="brutality_blade"> Brutality Blade</option>
                    <option value="chromatically_tempered_sword"> Chromatically Tempered Sword</option>
                    <option value="dal_rends_sacred_charge"> Dal Rends Sacred Charge</option>
                    <option value="gressil_dawn_of_ruin"> Gressil Dawn of Ruin</option>
                    <option value="iblis_blade_of_the_fallen_seraph"> Iblis Blade of the Fallen Seraph</option>
                    <option value="krol_blade"> Krol Blade</option>
                    <option value="maladath"> Maladath</option>
                    <option value="mirahs_song"> Mirahs Song</option>
                    <option value="nightmare_blade"> Nightmare Blade</option>
                    <option value="protectors_sword"> Protectors Sword</option>
                    <option value="quel_serrar"> Quel Serrar</option>
                    <option value="r14_longsword"> R14 Longsword</option>
                    <option value="r14_swiftblade"> R14 Swiftblade</option>
                    <option value="ravencrests_legacy"> Ravencrests Legacy</option>
                    <option value="ravenholdt_slicer"> Ravenholdt Slicer</option>
                    <option value="teebus_blazing_longsword"> Teebus Blazing Longsword</option>
                    <option value="the_hungering_cold"> The Hungering Cold</option>
                    <option value="thrash_blade"> Thrash Blade</option>
                    <option value="thunderfury_blessed_blade"> Thunderfury Blessed Blade</option>
                    <option value="viskag"> Viskag</option>
                    <option value="warblade_hakkari_mh"> Warblade Hakkari Mh</option>
                    <option value="widows_remorse"> Widows Remorse</option>
                    <option value="zulian_slicer"> Zulian Slicer</option>
                    <option value="none" disabled> --- AXES ---</option>
                    <option value="ancient_hakkari_manslayer"> Ancient Hakkari Manslayer</option>
                    <option value="annihilator"> Annihilator</option>
                    <option value="axe_of_the_deep_woods"> Axe of the Deep Woods</option>
                    <option value="blessed_qiraji_war_axe"> Blessed Qiraji War Axe</option>
                    <option value="bone_slicing_hatchet"> Bone Slicing Hatchet</option>
                    <option value="crul_shorukh_edge_of_chaos"> Crul Shorukh Edge of Chaos</option>
                    <option value="deathbringer"> Deathbringer</option>
                    <option value="dooms_edge"> Dooms Edge</option>
                    <option value="flurry_axe"> Flurry Axe</option>
                    <option value="frostbite"> Frostbite</option>
                    <option value="hatchet_of_sundered_bone"> Hatchet of Sundered Bone</option>
                    <option value="r14_handaxe"> R14 Handaxe</option>
                    <option value="rivenspike"> Rivenspike</option>
                    <option value="sickle_on_unyielding_strength"> Sickle On Unyielding Strength</option>
                    <option value="zulian_hacker_of_strength"> Zulian Hacker of Strength</option>
                    <option value="zulian_hacker_of_the_tiger"> Zulian Hacker of the Tiger</option>
                    <option value="none" disabled> --- DAGGERS ---</option>
                    <option value="alcors_sunrazor"> Alcors Sunrazor</option>
                    <option value="blessed_qiraji_pugio"> Blessed Qiraji Pugio</option>
                    <option value="core_hound_tooth"> Core Hound Tooth</option>
                    <option value="deaths_sting"> Deaths Sting</option>
                    <option value="dragonfang_blade"> Dragonfang Blade</option>
                    <option value="fang_of_the_faceless"> Fang of the Faceless</option>
                    <option value="felstriker"> Felstriker</option>
                    <option value="finkles_skinner"> Finkles Skinner</option>
                    <option value="gutgore_ripper"> Gutgore Ripper</option>
                    <option value="harbinger_of_doom"> Harbinger of Doom</option>
                    <option value="kingsfall"> Kingsfall</option>
                    <option value="maexxnas_fang"> Maexxnas Fang</option>
                    <option value="perditions_blade"> Perditions Blade</option>
                    <option value="r14_dagger"> R14 Dagger</option>
                    <option value="none" disabled> --- MACES ---</option>
                    <option value="anubisath_warhammer"> Anubisath Warhammer</option>
                    <option value="blessed_qiraji_warhammer"> Blessed Qiraji Warhammer</option>
                    <option value="ebon_hand"> Ebon Hand</option>
                    <option value="empyrean_demolisher"> Empyrean Demolisher</option>
                    <option value="ironfoe"> Ironfoe</option>
                    <option value="mass_of_mcgowan"> Mass of Mcgowan</option>
                    <option value="misplaced_servo_arm"> Misplaced Servo Arm</option>
                    <option value="persuader"> Persuader</option>
                    <option value="r14_mace"> R14 Mace</option>
                    <option value="sand_polished_hammer"> Sand Polished Hammer</option>
                    <option value="sceptre_of_smiting"> Sceptre of Smiting</option>
                    <option value="spineshatter"> Spineshatter</option>
                    <option value="stormstike_hammer"> Stormstike Hammer</option>
                    <option value="the_castigator"> The Castigator</option>
                    <option value="none" disabled> --- FISTS ---</option>
                    <option value="claw_of_the_black_drake"> Claw of the Black Drake</option>
                    <option value="eskhadars_right_claw"> Eskhadars Right Claw</option>
                    <option value="silithid_claw"> Silithid Claw</option>
                </select>
                <select id="off_hand_dd" class="weapon-select">
                    <option value="none" selected disabled></option>
                    <option value="none" disabled> --- SWORDS ---</option>
                    <option value="ancient_qiraji_ripper"> Ancient Qiraji Ripper</option>
                    <option value="argent_avenger"> Argent Avenger</option>
                    <option value="assassination_blade"> Assassination Blade</option>
                    <option value="blackguard"> Blackguard</option>
                    <option value="brutality_blade"> Brutality Blade</option>
                    <option value="chromatically_tempered_sword"> Chromatically Tempered Sword</option>
                    <option value="dal_rends_tribal_guardian"> Dal Rends Tribal Guardian</option>
                    <option value="gressil_dawn_of_ruin"> Gressil Dawn of Ruin</option>
                    <option value="iblis_blade_of_the_fallen_seraph"> Iblis Blade of the Fallen Seraph</option>
                    <option value="maladath"> Maladath</option>
                    <option value="mirahs_song"> Mirahs Song</option>
                    <option value="nightmare_blade"> Nightmare Blade</option>
                    <option value="protectors_sword"> Protectors Sword</option>
                    <option value="r14_longsword"> R14 Longsword</option>
                    <option value="r14_swiftblade"> R14 Swiftblade</option>
                    <option value="ravencrests_legacy"> Ravencrests Legacy</option>
                    <option value="ravenholdt_slicer"> Ravenholdt Slicer</option>
                    <option value="the_hungering_cold"> The Hungering Cold</option>
                    <option value="thrash_blade"> Thrash Blade</option>
                    <option value="thunderfury_blessed_blade"> Thunderfury Blessed Blade</option>
                    <option value="viskag"> Viskag</option>
                    <option value="warblade_hakkari_oh"> Warblade Hakkari Oh</option>
                    <option value="widows_remorse"> Widows Remorse</option>
                    <option value="zulian_slicer"> Zulian Slicer</option>
                    <option value="none" disabled> --- AXES ---</option>
                    <option value="ancient_hakkari_manslayer"> Ancient Hakkari Manslayer</option>
                    <option value="axe_of_the_deep_woods"> Axe of the Deep Woods</option>
                    <option value="blessed_qiraji_war_axe"> Blessed Qiraji War Axe</option>
                    <option value="bone_slicing_hatchet"> Bone Slicing Hatchet</option>
                    <option value="crul_shorukh_edge_of_chaos"> Crul Shorukh Edge of Chaos</option>
                    <option value="deathbringer"> Deathbringer</option>
                    <option value="dooms_edge"> Dooms Edge</option>
                    <option value="flurry_axe"> Flurry Axe</option>
                    <option value="frostbite"> Frostbite</option>
                    <option value="hatchet_of_sundered_bone"> Hatchet of Sundered Bone</option>
                    <option value="r14_handaxe"> R14 Handaxe</option>
                    <option value="rivenspike"> Rivenspike</option>
                    <option value="sickle_on_unyielding_strength"> Sickle On Unyielding Strength</option>
                    <option value="zulian_hacker_of_strength"> Zulian Hacker of Strength</option>
                    <option value="zulian_hacker_of_the_tiger"> Zulian Hacker of the Tiger</option>
                    <option value="none" disabled> --- DAGGERS ---</option>
                    <option value="alcors_sunrazor"> Alcors Sunrazor</option>
                    <option value="blessed_qiraji_pugio"> Blessed Qiraji Pugio</option>
                    <option value="core_hound_tooth"> Core Hound Tooth</option>
                    <option value="deaths_sting"> Deaths Sting</option>
                    <option value="distracting_dagger"> Distracting Dagger</option>
                    <option value="dragonfang_blade"> Dragonfang Blade</option>
                    <option value="fang_of_the_faceless"> Fang of the Faceless</option>
                    <option value="felstriker"> Felstriker</option>
                    <option value="gutgore_ripper"> Gutgore Ripper</option>
                    <option value="harbinger_of_doom"> Harbinger of Doom</option>
                    <option value="kingsfall"> Kingsfall</option>
                    <option value="maexxnas_fang"> Maexxnas Fang</option>
                    <option value="perditions_blade"> Perditions Blade</option>
                    <option value="r14_dagger"> R14 Dagger</option>
                    <option value="none" disabled> --- MACES ---</option>
                    <option value="anubisath_warhammer"> Anubisath Warhammer</option>
                    <option value="blessed_qiraji_warhammer"> Blessed Qiraji Warhammer</option>
                    <option value="ebon_hand"> Ebon Hand</option>
                    <option value="mass_of_mcgowan"> Mass of Mcgowan</option>
                    <option value="misplaced_servo_arm"> Misplaced Servo Arm</option>
                    <option value="r14_mace"> R14 Mace</option>
                    <option value="sand_polished_hammer"> Sand Polished Hammer</option>
                    <option value="sceptre_of_smiting"> Sceptre of Smiting</option>
                    <option value="stormstike_hammer"> Stormstike Hammer</option>
                    <option value="the_castigator"> The Castigator</option>
                    <option value="none" disabled> --- FISTS ---</option>
                    <option value="claw_of_the_frost_wyrm"> Claw of the Frost Wyrm</option>
                </select>
                <!--armor stop2-->
            </div>

            <div id="two_hand_div" style="display:none">
                <!--armor begin3-->
                <select id="two_hand_dd" class="weapon-select">
                    <option value="none" selected disabled></option>
                    <option value="none" disabled> --- TWO_HANDED_SWORDS ---</option>
                    <option value="ashkandi,_greatsword_of_the_brotherhood"> Ashkandi, Greatsword of the Brotherhood
                    </option>
                    <option value="bonereavers_edge"> Bonereavers Edge</option>
                    <option value="claymore_of_unholy_might"> Claymore of Unholy Might</option>
                    <option value="corrupted_ashbringer"> Corrupted Ashbringer</option>
                    <option value="destiny"> Destiny</option>
                    <option value="kalimdors_revenge"> Kalimdors Revenge</option>
                    <option value="manslayer_of_the_qiraji"> Manslayer of the Qiraji</option>
                    <option value="obsidian_edged_blade"> Obsidian Edged Blade</option>
                    <option value="the_untamed_blade"> The Untamed Blade</option>
                    <option value="zinrokh,_destroyer_of_worlds"> Zinrokh, Destroyer of Worlds</option>
                    <option value="none" disabled> --- TWO_HANDED_AXES ---</option>
                    <option value="dark_edge_of_insanity"> Dark Edge of Insanity</option>
                    <option value="draconic_avenger"> Draconic Avenger</option>
                    <option value="drake_talon_cleaver"> Drake Talon Cleaver</option>
                    <option value="neretzek,_the_blood_drinker"> Neretzek, the Blood Drinker</option>
                    <option value="severance"> Severance</option>
                    <option value="spinal_reaper"> Spinal Reaper</option>
                    <option value="treants_bane"> Treants Bane</option>
                    <option value="none" disabled> --- TWO_HANDED_MACES ---</option>
                    <option value="draconic_maul"> Draconic Maul</option>
                    <option value="herald_of_woe"> Herald of Woe</option>
                    <option value="jekliks_crusher"> Jekliks Crusher</option>
                    <option value="manual_crowd_pummeler_1charge"> Manual Crowd Pummeler 1charge</option>
                    <option value="manual_crowd_pummeler_2charge"> Manual Crowd Pummeler 2charge</option>
                    <option value="manual_crowd_pummeler_3charge"> Manual Crowd Pummeler 3charge</option>
                    <option value="might_of_menethil"> Might of Menethil</option>
                    <option value="sulfuras,_hand_of_ragnaros"> Sulfuras, Hand of Ragnaros</option>
                </select>
                <!--armor stop3-->
            </div>


        </div>
        <div id="armor_multiple" style="display:none">

            <p class="select-title">Quick-select:</p><br>
            <button onclick="load_p1prebisitems()">Example where phase 1 "pre-BiS" items are examined</button>
            <button onclick="load_p5pvebismult()">Load P5 PvE-BiS</button>
            <button onclick="load_p6pvebismult()">Load P6 BiS</button>
            <br>
            Add/remove items: <b>ctrl + left-click</b>.<br>
            Add all items in a slot: Select an item box then press <b> ctrl + a</b>.<br><br>
            The optimization takes between: 1-"Max optimization time" seconds. <br>
            If you selected a lot of items leave it running in another tab<br><br>

            <!--armor begin4-->
            <span class="left_select">Helmet</span><span class="middle_select">Neck</span><span class="right_select">Shoulder</span><br>
            <select id="helmet_dd_mult" size="10" class="item-select" multiple>
                <option value="circlet_of_restless_dreams"> Circlet of Restless Dreams</option>
                <option value="conquerors_crown"> Conquerors Crown</option>
                <option value="crown_of_destruction"> Crown of Destruction</option>
                <option value="dreadnaught_helmet"> Dreadnaught Helmet</option>
                <option value="expert_goldminers_head"> Expert Goldminers Head</option>
                <option value="eye_of_rend"> Eye of Rend</option>
                <option value="fury_visor"> Fury Visor</option>
                <option value="helm_of_domination"> Helm of Domination</option>
                <option value="helm_of_endless_rage"> Helm of Endless Rage</option>
                <option value="helm_of_heroism"> Helm of Heroism</option>
                <option value="helm_of_the_executioner"> Helm of the Executioner</option>
                <option value="helm_of_valor"> Helm of Valor</option>
                <option value="helm_of_wrath"> Helm of Wrath</option>
                <option value="icebane_helmet"> Icebane Helmet</option>
                <option value="icy_scale_coif"> Icy Scale Coif</option>
                <option value="lionheart_helm"> Lionheart Helm</option>
                <option value="mask_of_the_unforgiven"> Mask of the Unforgiven</option>
                <option value="r10_commanders_plate_helm"> R10 Commanders Plate Helm</option>
                <option value="r13_plate_helm"> R13 Plate Helm</option>
                <option value="raging_berserkers_helm"> Raging Berserkers Helm</option>
            </select>

            <select id="neck_dd_mult" size="10" class="item-select" multiple>
                <option value="amulet_of_the_darkmoon"> Amulet of the Darkmoon</option>
                <option value="barbed_choker"> Barbed Choker</option>
                <option value="beads_of_ogre_might"> Beads of Ogre Might</option>
                <option value="choker_of_the_shifting_sands"> Choker of the Shifting Sands</option>
                <option value="emberfury_talisman"> Emberfury Talisman</option>
                <option value="fury_of_the_forgotten_swarm"> Fury of the Forgotten Swarm</option>
                <option value="imperial_jewel"> Imperial Jewel</option>
                <option value="mark_of_fordring"> Mark of Fordring</option>
                <option value="onyxia_tooth_pendant"> Onyxia Tooth Pendant</option>
                <option value="pendant_of_the_qiraji_guardian"> Pendant of the Qiraji Guardian</option>
                <option value="prestors_talisman_of_connivery"> Prestors Talisman of Connivery</option>
                <option value="sadists_collar"> Sadists Collar</option>
                <option value="stormrages_talisman_of_seething"> Stormrages Talisman of Seething</option>
                <option value="the_eye_of_hakkar"> The Eye of Hakkar</option>
            </select>

            <select id="shoulder_dd_mult" size="10" class="item-select" multiple>
                <option value="abyssal_plate_epaulets"> Abyssal Plate Epaulets</option>
                <option value="black_dragonscale_shoulders"> Black Dragonscale Shoulders</option>
                <option value="bloadsoaked_pauldrons"> Bloadsoaked Pauldrons</option>
                <option value="chitinous_shoulderguards"> Chitinous Shoulderguards</option>
                <option value="conquerors_spaulders"> Conquerors Spaulders</option>
                <option value="defilers_plate_spaulders"> Defilers Plate Spaulders</option>
                <option value="drake_talon_pauldrons"> Drake Talon Pauldrons</option>
                <option value="dreadnaught_pauldrons"> Dreadnaught Pauldrons</option>
                <option value="flamescarred_shoulders"> Flamescarred Shoulders</option>
                <option value="icebane_pauldrons"> Icebane Pauldrons</option>
                <option value="mantle_of_wicked_revenge"> Mantle of Wicked Revenge</option>
                <option value="pauldrons_of_might"> Pauldrons of Might</option>
                <option value="pauldrons_of_the_unrelenting"> Pauldrons of the Unrelenting</option>
                <option value="pauldrons_of_wrath"> Pauldrons of Wrath</option>
                <option value="r10_commanders_plate_shoulders"> R10 Commanders Plate Shoulders</option>
                <option value="r13_plate_shoulderguards"> R13 Plate Shoulderguards</option>
                <option value="razorsteel_shoulders"> Razorsteel Shoulders</option>
                <option value="spaulders_of_heroism"> Spaulders of Heroism</option>
                <option value="spaulders_of_valor"> Spaulders of Valor</option>
                <option value="taut_dragonhide_shoulderpads"> Taut Dragonhide Shoulderpads</option>
                <option value="truestrike_shoulders"> Truestrike Shoulders</option>
                <option value="wyrmhide_spaulders"> Wyrmhide Spaulders</option>
            </select>

            <p></p>

            <span class="left_select">Back</span><span class="middle_select">Chest</span><span class="right_select">Wrists</span><br>
            <select id="back_dd_mult" size="10" class="item-select" multiple>
                <option value="blackveil_cloak"> Blackveil Cloak</option>
                <option value="cape_of_the_black_baron"> Cape of the Black Baron</option>
                <option value="cloak_of_concentrated_hate"> Cloak of Concentrated Hate</option>
                <option value="cloak_of_draconic_might"> Cloak of Draconic Might</option>
                <option value="cloak_of_firemaw"> Cloak of Firemaw</option>
                <option value="cloak_of_the_fallen_god"> Cloak of the Fallen God</option>
                <option value="cloak_of_the_golden_hive"> Cloak of the Golden Hive</option>
                <option value="cloak_of_the_scourge"> Cloak of the Scourge</option>
                <option value="cloak_of_the_shrouded_mists"> Cloak of the Shrouded Mists</option>
                <option value="deathguards_cloak"> Deathguards Cloak</option>
                <option value="drape_of_unyielding_strength"> Drape of Unyielding Strength</option>
                <option value="might_of_the_tribe"> Might of the Tribe</option>
                <option value="puissant_cape"> Puissant Cape</option>
                <option value="shifting_cloak"> Shifting Cloak</option>
                <option value="shroud_of_dominion"> Shroud of Dominion</option>
                <option value="stoneskin_gargoyle_cape"> Stoneskin Gargoyle Cape</option>
                <option value="windshear_cape"> Windshear Cape</option>
                <option value="zulian_tigerhide_cloak"> Zulian Tigerhide Cloak</option>
            </select>

            <select id="chest_dd_mult" size="10" class="item-select" multiple>
                <option value="black_dragonscale_chest"> Black Dragonscale Chest</option>
                <option value="bloodsoul_breastplate"> Bloodsoul Breastplate</option>
                <option value="breastplate_of_annihilation"> Breastplate of Annihilation</option>
                <option value="breastplate_of_bloodthirst"> Breastplate of Bloodthirst</option>
                <option value="breastplate_of_heroism"> Breastplate of Heroism</option>
                <option value="breastplate_of_the_chromatic_flight"> Breastplate of the Chromatic Flight</option>
                <option value="breastplate_of_undead_slaying"> Breastplate of Undead Slaying</option>
                <option value="breastplate_of_valor"> Breastplate of Valor</option>
                <option value="breastplate_of_wrath"> Breastplate of Wrath</option>
                <option value="cadaverous_armor"> Cadaverous Armor</option>
                <option value="conquerors_breastplate"> Conquerors Breastplate</option>
                <option value="deathdealer_breastplate"> Deathdealer Breastplate</option>
                <option value="dreadnaught_breastplate"> Dreadnaught Breastplate</option>
                <option value="ghoul_skin_tunic"> Ghoul Skin Tunic</option>
                <option value="icebane_breastplate"> Icebane Breastplate</option>
                <option value="icy_scale_breastplate"> Icy Scale Breastplate</option>
                <option value="malfurions_blessed_bulwark"> Malfurions Blessed Bulwark</option>
                <option value="obsidian_mail_tunic"> Obsidian Mail Tunic</option>
                <option value="ogre_forged_hauberk"> Ogre Forged Hauberk</option>
                <option value="plated_abomination_ribcage"> Plated Abomination Ribcage</option>
                <option value="polar_tunic"> Polar Tunic</option>
                <option value="r13_plate_armor"> R13 Plate Armor</option>
                <option value="r8_plate_hauberk"> R8 Plate Hauberk</option>
                <option value="runed_bloodstaind_hauberk"> Runed Bloodstaind Hauberk</option>
                <option value="savage_gladiator_chain"> Savage Gladiator Chain</option>
                <option value="tombstone_breastplate"> Tombstone Breastplate</option>
                <option value="vest_of_swift_execution"> Vest of Swift Execution</option>
                <option value="zandalar_vindicators_breastplate"> Zandalar Vindicators Breastplate</option>
            </select>

            <select id="wrists_dd_mult" size="10" class="item-select" multiple>
                <option value="abyssal_plate_vambraces"> Abyssal Plate Vambraces</option>
                <option value="battleborn_armbraces"> Battleborn Armbraces</option>
                <option value="berserker_bracers"> Berserker Bracers</option>
                <option value="blinkstrike"> Blinkstrike</option>
                <option value="bracelets_of_wrath"> Bracelets of Wrath</option>
                <option value="bracers_of_brutality"> Bracers of Brutality</option>
                <option value="bracers_of_heroism"> Bracers of Heroism</option>
                <option value="bracers_of_undead_slaying"> Bracers of Undead Slaying</option>
                <option value="deeprock_bracers"> Deeprock Bracers</option>
                <option value="dreadnaught_bracers"> Dreadnaught Bracers</option>
                <option value="hive_defiler_wristguards"> Hive Defiler Wristguards</option>
                <option value="icebane_bracers"> Icebane Bracers</option>
                <option value="icy_scale_bracers"> Icy Scale Bracers</option>
                <option value="polar_bracers"> Polar Bracers</option>
                <option value="qiraji_execution_bracers"> Qiraji Execution Bracers</option>
                <option value="vambraces_of_the_sadist"> Vambraces of the Sadist</option>
                <option value="wristguards_of_stability"> Wristguards of Stability</option>
                <option value="wristguards_of_true_flight"> Wristguards of True Flight</option>
                <option value="wristguards_of_vengeance"> Wristguards of Vengeance</option>
                <option value="zandalar_armguards"> Zandalar Armguards</option>
            </select>

            <p></p>

            <span class="left_select">Hands</span><span class="middle_select">Belt</span><span
                class="right_select">Legs</span><br>
            <select id="hands_dd_mult" size="10" class="item-select" multiple>
                <option value="aged_core_leather_gloves"> Aged Core Leather Gloves</option>
                <option value="bloodmail_gauntlets"> Bloodmail Gauntlets</option>
                <option value="devilsaur_gauntlets"> Devilsaur Gauntlets</option>
                <option value="dreadnaught_gauntlets"> Dreadnaught Gauntlets</option>
                <option value="edgemasters_handguards"> Edgemasters Handguards</option>
                <option value="flameguard_gauntlets"> Flameguard Gauntlets</option>
                <option value="gauntlets_of_annihilation"> Gauntlets of Annihilation</option>
                <option value="gauntlets_of_heroism"> Gauntlets of Heroism</option>
                <option value="gauntlets_of_might"> Gauntlets of Might</option>
                <option value="gauntlets_of_steadfast_determination"> Gauntlets of Steadfast Determination</option>
                <option value="gauntlets_of_undead_slaying"> Gauntlets of Undead Slaying</option>
                <option value="gauntlets_of_valor"> Gauntlets of Valor</option>
                <option value="gauntlets_of_wrath"> Gauntlets of Wrath</option>
                <option value="gloves_of_enforcement"> Gloves of Enforcement</option>
                <option value="icebane_gauntlets"> Icebane Gauntlets</option>
                <option value="icy_scale_gauntlets"> Icy Scale Gauntlets</option>
                <option value="polar_gloves"> Polar Gloves</option>
                <option value="r12_plate_gauntlets"> R12 Plate Gauntlets</option>
                <option value="r7_plate_gauntlets"> R7 Plate Gauntlets</option>
                <option value="reiver_claws"> Reiver Claws</option>
                <option value="sacrificial_gauntlets"> Sacrificial Gauntlets</option>
            </select>

            <select id="belt_dd_mult" size="10" class="item-select" multiple>
                <option value="belt_of_heroism"> Belt of Heroism</option>
                <option value="belt_of_never_ending_agony"> Belt of Never Ending Agony</option>
                <option value="belt_of_preserved_heads"> Belt of Preserved Heads</option>
                <option value="belt_of_wrath"> Belt of Wrath</option>
                <option value="brigam_girdle"> Brigam Girdle</option>
                <option value="defilers_plate_girdle"> Defilers Plate Girdle</option>
                <option value="dreadnaught_waistguard"> Dreadnaught Waistguard</option>
                <option value="frostbite_girdle"> Frostbite Girdle</option>
                <option value="frostwolf_plate_belt"> Frostwolf Plate Belt</option>
                <option value="girdle_of_the_fallen_crusader"> Girdle of the Fallen Crusader</option>
                <option value="girdle_of_the_mentor"> Girdle of the Mentor</option>
                <option value="muggers_belt"> Muggers Belt</option>
                <option value="omokks_girth_restrainer"> Omokks Girth Restrainer</option>
                <option value="onslaught_girdle"> Onslaught Girdle</option>
                <option value="therazanes_link"> Therazanes Link</option>
                <option value="triad_girdle"> Triad Girdle</option>
                <option value="unmelting_ice_girdle"> Unmelting Ice Girdle</option>
                <option value="zandalar_vindicators_belt"> Zandalar Vindicators Belt</option>
            </select>

            <select id="legs_dd_mult" size="10" class="item-select" multiple>
                <option value="WSG_plate_legguards"> Wsg Plate Legguards</option>
                <option value="abyssal_plate_legplates"> Abyssal Plate Legplates</option>
                <option value="black_dragonscale_leggings"> Black Dragonscale Leggings</option>
                <option value="blademaster_leggings"> Blademaster Leggings</option>
                <option value="bloodsoaked_legplates"> Bloodsoaked Legplates</option>
                <option value="cloudkeeper_legplates"> Cloudkeeper Legplates</option>
                <option value="cloudkeeper_legplates_no_use"> Cloudkeeper Legplates No Use</option>
                <option value="conquerors_legguards"> Conquerors Legguards</option>
                <option value="dark_heart_pants"> Dark Heart Pants</option>
                <option value="devilsaur_leggings"> Devilsaur Leggings</option>
                <option value="dreadnaughts_legplates"> Dreadnaughts Legplates</option>
                <option value="eldritch_legplates"> Eldritch Legplates</option>
                <option value="handcrafted_mastersmith_leggings"> Handcrafted Mastersmith Leggings</option>
                <option value="icebane_leggings"> Icebane Leggings</option>
                <option value="icy_scale_leggings"> Icy Scale Leggings</option>
                <option value="leggings_of_apocalypse"> Leggings of Apocalypse</option>
                <option value="leggings_of_carnage"> Leggings of Carnage</option>
                <option value="legguards_of_the_fallen_crusader"> Legguards of the Fallen Crusader</option>
                <option value="legplates_of_heroism"> Legplates of Heroism</option>
                <option value="legplates_of_the_qiraji_command"> Legplates of the Qiraji Command</option>
                <option value="legplates_of_valor"> Legplates of Valor</option>
                <option value="legplates_of_wrath"> Legplates of Wrath</option>
                <option value="r12_plate_legguards"> R12 Plate Legguards</option>
                <option value="r8_plate_leggings"> R8 Plate Leggings</option>
                <option value="scaled_sand_reaver_leggings"> Scaled Sand Reaver Leggings</option>
                <option value="titanic_leggings"> Titanic Leggings</option>
            </select>

            <p></p>

            <span class="left_select">Boots</span><span class="middle_select">Rings</span><span class="right_select">Trinkets</span><br>
            <select id="boots_dd_mult" size="10" class="item-select" multiple>
                <option value="battlechasers_greaves"> Battlechasers Greaves</option>
                <option value="black_dragonscale_boots"> Black Dragonscale Boots</option>
                <option value="blooddrenched_footpads"> Blooddrenched Footpads</option>
                <option value="bloodmail_boots"> Bloodmail Boots</option>
                <option value="boots_of_heroism"> Boots of Heroism</option>
                <option value="boots_of_the_fallen_hero"> Boots of the Fallen Hero</option>
                <option value="boots_of_the_shadow_flame"> Boots of the Shadow Flame</option>
                <option value="boots_of_the_vanguard"> Boots of the Vanguard</option>
                <option value="chromatic_boots"> Chromatic Boots</option>
                <option value="conquerors_greaves"> Conquerors Greaves</option>
                <option value="defilers_plate_greaves"> Defilers Plate Greaves</option>
                <option value="dreadnaughts_sabatons"> Dreadnaughts Sabatons</option>
                <option value="r12_plate_boots"> R12 Plate Boots</option>
                <option value="r7_greaves"> R7 Greaves</option>
                <option value="sabatons_of_wrath"> Sabatons of Wrath</option>
                <option value="sapphirons_scale_boots"> Sapphirons Scale Boots</option>
                <option value="slime_kickers"> Slime Kickers</option>
                <option value="windreaver_greaves"> Windreaver Greaves</option>
            </select>

            <select id="ring_dd_mult" size="10" class="item-select" multiple>
                <option value="band_of_accuria"> Band of Accuria</option>
                <option value="band_of_earthen_might"> Band of Earthen Might</option>
                <option value="band_of_jin"> Band of Jin</option>
                <option value="band_of_reanimation"> Band of Reanimation</option>
                <option value="band_of_the_ogre_king"> Band of the Ogre King</option>
                <option value="band_of_unnatural_forces"> Band of Unnatural Forces</option>
                <option value="blackstone_ring"> Blackstone Ring</option>
                <option value="circle_of_applied_force"> Circle of Applied Force</option>
                <option value="don_julios_band"> Don Julios Band</option>
                <option value="magnis_will"> Magnis Will</option>
                <option value="masons_fraternity_ring"> Masons Fraternity Ring</option>
                <option value="master_dragonslayers_ring"> Master Dragonslayers Ring</option>
                <option value="might_of_cenarius"> Might of Cenarius</option>
                <option value="painweaver_band"> Painweaver Band</option>
                <option value="quick_strike_ring"> Quick Strike Ring</option>
                <option value="ring_of_fury"> Ring of Fury</option>
                <option value="ring_of_the_dreadnaught"> Ring of the Dreadnaught</option>
                <option value="ring_of_the_god_slayer"> Ring of the God Slayer</option>
                <option value="ring_of_the_qiraji_fury"> Ring of the Qiraji Fury</option>
                <option value="seal_of_jin"> Seal of Jin</option>
                <option value="seal_of_the_gurubashi_berserker"> Seal of the Gurubashi Berserker</option>
                <option value="signet_of_the_bronze_dragonflight"> Signet of the Bronze Dragonflight</option>
                <option value="signet_of_the_fallen_defender"> Signet of the Fallen Defender</option>
                <option value="signet_of_unyielding_strength"> Signet of Unyielding Strength</option>
                <option value="tarnished_elven_ring"> Tarnished Elven Ring</option>
            </select>

            <select id="trinket_dd_mult" size="10" class="item-select" multiple>
                <option value="badge_of_the_swarmguard"> Badge of the Swarmguard</option>
                <option value="blackhands_breadth"> Blackhands Breadth</option>
                <option value="counterattack_lodestone"> Counterattack Lodestone</option>
                <option value="darkmoon_card_maelstrom"> Darkmoon Card Maelstrom</option>
                <option value="diamond_flask"> Diamond Flask</option>
                <option value="drake_fang_talisman"> Drake Fang Talisman</option>
                <option value="earthstrike"> Earthstrike</option>
                <option value="hand_of_justice"> Hand of Justice</option>
                <option value="jom_gabbar"> Jom Gabbar</option>
                <option value="kiss_of_the_spider"> Kiss of the Spider</option>
                <option value="mark_of_the_champion"> Mark of the Champion</option>
                <option value="rune_of_the_guard_captain"> Rune of the Guard Captain</option>
                <option value="seal_of_the_dawn"> Seal of the Dawn</option>
                <option value="slayers_crest"> Slayers Crest</option>
            </select>

            <p></p>

            <span class="left_select">Ranged</span><span class="middle_select">Weapons</span><span class="right_select">Two-Handed Weapons</span><br>
            <select id="ranged_dd_mult" size="10" class="item-select" multiple>
                <option value="blastershot"> Blastershot</option>
                <option value="bloodseeker"> Bloodseeker</option>
                <option value="bow_of_taut_sinew"> Bow of Taut Sinew</option>
                <option value="crossbow_of_imminent_doom"> Crossbow of Imminent Doom</option>
                <option value="dragonbreath_hand_cannon"> Dragonbreath Hand Cannon</option>
                <option value="gurubashi_dwarf_destroyer"> Gurubashi Dwarf Destroyer</option>
                <option value="heartseeking_crossbow"> Heartseeking Crossbow</option>
                <option value="heartstriker"> Heartstriker</option>
                <option value="huhurans_stinger"> Huhurans Stinger</option>
                <option value="larvae_of_the_great_worm"> Larvae of the Great Worm</option>
                <option value="nerubian_slavemaker"> Nerubian Slavemaker</option>
                <option value="precisely_calibrated_boomstick"> Precisely Calibrated Boomstick</option>
                <option value="riphook"> Riphook</option>
                <option value="satyrs_bow"> Satyrs Bow</option>
                <option value="soulstring"> Soulstring</option>
                <option value="strikers_mark"> Strikers Mark</option>
                <option value="toxin_injector"> Toxin Injector</option>
            </select>

            <select id="weapons_dd_mult" size="10" class="item-select" multiple>
                <option value="none" disabled> --- SWORDS ---</option>
                <option value="ancient_qiraji_ripper"> Ancient Qiraji Ripper</option>
                <option value="argent_avenger"> Argent Avenger</option>
                <option value="assassination_blade"> Assassination Blade</option>
                <option value="blackguard"> Blackguard</option>
                <option value="brutality_blade"> Brutality Blade</option>
                <option value="chromatically_tempered_sword"> Chromatically Tempered Sword</option>
                <option value="dal_rends_sacred_charge"> Dal Rends Sacred Charge</option>
                <option value="dal_rends_tribal_guardian"> Dal Rends Tribal Guardian</option>
                <option value="gressil_dawn_of_ruin"> Gressil Dawn of Ruin</option>
                <option value="iblis_blade_of_the_fallen_seraph"> Iblis Blade of the Fallen Seraph</option>
                <option value="krol_blade"> Krol Blade</option>
                <option value="maladath"> Maladath</option>
                <option value="mirahs_song"> Mirahs Song</option>
                <option value="nightmare_blade"> Nightmare Blade</option>
                <option value="protectors_sword"> Protectors Sword</option>
                <option value="quel_serrar"> Quel Serrar</option>
                <option value="r14_longsword"> R14 Longsword</option>
                <option value="r14_swiftblade"> R14 Swiftblade</option>
                <option value="ravencrests_legacy"> Ravencrests Legacy</option>
                <option value="ravenholdt_slicer"> Ravenholdt Slicer</option>
                <option value="teebus_blazing_longsword"> Teebus Blazing Longsword</option>
                <option value="the_hungering_cold"> The Hungering Cold</option>
                <option value="thrash_blade"> Thrash Blade</option>
                <option value="thunderfury_blessed_blade"> Thunderfury Blessed Blade</option>
                <option value="viskag"> Viskag</option>
                <option value="warblade_hakkari_mh"> Warblade Hakkari Mh</option>
                <option value="warblade_hakkari_oh"> Warblade Hakkari Oh</option>
                <option value="widows_remorse"> Widows Remorse</option>
                <option value="zulian_slicer"> Zulian Slicer</option>
                <option value="none" disabled> --- AXES ---</option>
                <option value="ancient_hakkari_manslayer"> Ancient Hakkari Manslayer</option>
                <option value="annihilator"> Annihilator</option>
                <option value="axe_of_the_deep_woods"> Axe of the Deep Woods</option>
                <option value="blessed_qiraji_war_axe"> Blessed Qiraji War Axe</option>
                <option value="bone_slicing_hatchet"> Bone Slicing Hatchet</option>
                <option value="crul_shorukh_edge_of_chaos"> Crul Shorukh Edge of Chaos</option>
                <option value="deathbringer"> Deathbringer</option>
                <option value="dooms_edge"> Dooms Edge</option>
                <option value="flurry_axe"> Flurry Axe</option>
                <option value="frostbite"> Frostbite</option>
                <option value="hatchet_of_sundered_bone"> Hatchet of Sundered Bone</option>
                <option value="r14_handaxe"> R14 Handaxe</option>
                <option value="rivenspike"> Rivenspike</option>
                <option value="sickle_on_unyielding_strength"> Sickle On Unyielding Strength</option>
                <option value="zulian_hacker_of_strength"> Zulian Hacker of Strength</option>
                <option value="zulian_hacker_of_the_tiger"> Zulian Hacker of the Tiger</option>
                <option value="none" disabled> --- DAGGERS ---</option>
                <option value="alcors_sunrazor"> Alcors Sunrazor</option>
                <option value="blessed_qiraji_pugio"> Blessed Qiraji Pugio</option>
                <option value="core_hound_tooth"> Core Hound Tooth</option>
                <option value="deaths_sting"> Deaths Sting</option>
                <option value="distracting_dagger"> Distracting Dagger</option>
                <option value="dragonfang_blade"> Dragonfang Blade</option>
                <option value="fang_of_the_faceless"> Fang of the Faceless</option>
                <option value="felstriker"> Felstriker</option>
                <option value="finkles_skinner"> Finkles Skinner</option>
                <option value="gutgore_ripper"> Gutgore Ripper</option>
                <option value="harbinger_of_doom"> Harbinger of Doom</option>
                <option value="kingsfall"> Kingsfall</option>
                <option value="maexxnas_fang"> Maexxnas Fang</option>
                <option value="perditions_blade"> Perditions Blade</option>
                <option value="r14_dagger"> R14 Dagger</option>
                <option value="none" disabled> --- MACES ---</option>
                <option value="anubisath_warhammer"> Anubisath Warhammer</option>
                <option value="blessed_qiraji_warhammer"> Blessed Qiraji Warhammer</option>
                <option value="ebon_hand"> Ebon Hand</option>
                <option value="empyrean_demolisher"> Empyrean Demolisher</option>
                <option value="ironfoe"> Ironfoe</option>
                <option value="mass_of_mcgowan"> Mass of Mcgowan</option>
                <option value="misplaced_servo_arm"> Misplaced Servo Arm</option>
                <option value="persuader"> Persuader</option>
                <option value="r14_mace"> R14 Mace</option>
                <option value="sand_polished_hammer"> Sand Polished Hammer</option>
                <option value="sceptre_of_smiting"> Sceptre of Smiting</option>
                <option value="spineshatter"> Spineshatter</option>
                <option value="stormstike_hammer"> Stormstike Hammer</option>
                <option value="the_castigator"> The Castigator</option>
                <option value="none" disabled> --- FISTS ---</option>
                <option value="claw_of_the_black_drake"> Claw of the Black Drake</option>
                <option value="claw_of_the_frost_wyrm"> Claw of the Frost Wyrm</option>
                <option value="eskhadars_right_claw"> Eskhadars Right Claw</option>
                <option value="silithid_claw"> Silithid Claw</option>
            </select>
            <select id="two_hand_weapons_dd_mult" size="10" class="weapon-select" multiple>
                <option value="none" disabled> --- TWO_HANDED_SWORDS ---</option>
                <option value="ashkandi,_greatsword_of_the_brotherhood"> Ashkandi, Greatsword of the Brotherhood
                </option>
                <option value="bonereavers_edge"> Bonereavers Edge</option>
                <option value="claymore_of_unholy_might"> Claymore of Unholy Might</option>
                <option value="corrupted_ashbringer"> Corrupted Ashbringer</option>
                <option value="destiny"> Destiny</option>
                <option value="kalimdors_revenge"> Kalimdors Revenge</option>
                <option value="manslayer_of_the_qiraji"> Manslayer of the Qiraji</option>
                <option value="obsidian_edged_blade"> Obsidian Edged Blade</option>
                <option value="the_untamed_blade"> The Untamed Blade</option>
                <option value="zinrokh,_destroyer_of_worlds"> Zinrokh, Destroyer of Worlds</option>
                <option value="none" disabled> --- TWO_HANDED_AXES ---</option>
                <option value="dark_edge_of_insanity"> Dark Edge of Insanity</option>
                <option value="draconic_avenger"> Draconic Avenger</option>
                <option value="drake_talon_cleaver"> Drake Talon Cleaver</option>
                <option value="neretzek,_the_blood_drinker"> Neretzek, the Blood Drinker</option>
                <option value="severance"> Severance</option>
                <option value="spinal_reaper"> Spinal Reaper</option>
                <option value="treants_bane"> Treants Bane</option>
                <option value="none" disabled> --- TWO_HANDED_MACES ---</option>
                <option value="draconic_maul"> Draconic Maul</option>
                <option value="herald_of_woe"> Herald of Woe</option>
                <option value="jekliks_crusher"> Jekliks Crusher</option>
                <option value="manual_crowd_pummeler_1charge"> Manual Crowd Pummeler 1charge</option>
                <option value="manual_crowd_pummeler_2charge"> Manual Crowd Pummeler 2charge</option>
                <option value="manual_crowd_pummeler_3charge"> Manual Crowd Pummeler 3charge</option>
                <option value="might_of_menethil"> Might of Menethil</option>
                <option value="sulfuras,_hand_of_ragnaros"> Sulfuras, Hand of Ragnaros</option>
            </select>
            <!--armor stop4-->

        </div>
        <br>

        <p class="select-title">Select mode:</p><br>
        <input type="checkbox" id="normal_mode" checked
               onclick="unique_checkboxes('normal_mode', ['multiple_mode', 'do_comparison']);
                        unique_div(['armor_single', 'standard_description_div'],['armor_multiple', 'compare_div', 'multi_description_div'])">
        <label for="normal_mode"> <b>Standard</b>: Simulate the above selected item configuration. </label><br>
        <div class="description" id="standard_description_div">
            <input type="checkbox" id="item_strengths">
            <label for="item_strengths">Suggest armor upgrades for each slot.</label><br>

            <input type="checkbox" id="wep_strengths">
            <label for="wep_strengths">Suggest weapon upgrades.</label><br>
            (Depending on the selected items, these might run for a while. Proposals are displayed in the results
            section below.)<br>
        </div>
        <br>

        <input type="checkbox" id="multiple_mode"
               onclick="unique_checkboxes('multiple_mode', ['normal_mode', 'do_comparison']);
                        unique_div(['armor_multiple', 'multi_description_div'],['armor_single','standard_description_div', 'compare_div'])">
        <label for="multiple_mode"><b>Multi-mode</b>: Enable selection of multiple items from the same slot.</label><br>
        <div class="description" style="display:none" id="multi_description_div">
            <b>Information:</b> More items selected means that the optimizer will run for a longer time. It will break
            automatically when it has found the best set <b>OR</b> when the max optimization timer is reached.<br>
            <label for="max_optimize_time_dd">Max optimization time: (30-180s):</label>
            <input type="number" id="max_optimize_time_dd" name="quantity" min="30" max="180" value="90"> seconds.<br>
            <input type="checkbox" id="display_multi_debug">
            <label for="display_multi_debug">Output debug information from the optimizer (shown at the
                bottom)</label>
        </div>
        <br>

        <input type="checkbox" id="do_comparison"
               onclick="unique_checkboxes('do_comparison', ['multiple_mode', 'normal_mode']);
                        unique_div(['compare_div', 'armor_single'],['armor_multiple', 'multi_description_div'])">
        <label for="do_comparison"><b>Comparison</b>: Add a configuration file to compare against</label>
        <div class="description" style="display:none" id="compare_div">
            <b>Description:</b> Select an item config and press submit.<br>
            (To generate a config file press "Save config to file" at the top of the page)<br>
            <input type="file" id="myCompareFile" name="filename" accept=".txt"
                   onclick="show_div('do_comparison', 'compare_div')">
            <input type="submit" onclick="load_compare_data()">
        </div>
        <br>
    </div>
    <br><br>

    <button type="button" class="collapsible">Race and Enchants</button>
    <div class="content">
        <p class="select-title">Select race:</p><br>
        <select id="race_dd">
            <option value="human">human</option>
            <option value="gnome">gnome</option>
            <option value="dwarf">dwarf</option>
            <option value="night_elf">night_elf</option>
            <option value="orc">orc</option>
            <option value="troll">troll</option>
            <option value="undead">undead</option>
            <option value="tauren">tauren</option>
        </select><br><br>

        <p class="select-title">Select enchants:</p><br>
        <span>Helmet</span>
        <span style="position: relative;left: 50px;">Shoulder</span>
        <span style="position: relative;left: 90px;">Back</span>
        <span style="position: relative;left: 150px;">Chest</span><br>
        <select id="helmet_ench_dd" class="enchant-select">
            <option value="helmet">helmet</option>
            <option value="+8 strength">+8 strength</option>
            <option value="+1 haste">+1 haste</option>
        </select>

        <select id="shoulder_ench_dd" class="enchant-select">
            <option value="shoulder">shoulder</option>
            <option value="+30 attack_power">+30 AP</option>
            <option value="naxxramas">+1 crit +26 AP</option>
        </select>

        <select id="back_ench_dd" class="enchant-select">
            <option value="back">back</option>
            <option value="+3 agility">+3 agility</option>
        </select>

        <select id="chest_ench_dd" class="enchant-select">
            <option value="back">chest</option>
            <option value="+3 stats">+3 stats</option>
            <option value="+4 stats">+4 stats</option>
        </select>

        <p></p>
        <span>Wrist</span>
        <span style="position: relative;left: 65px;">Hands</span>
        <span style="position: relative;left: 120px;">Legs</span>
        <span style="position: relative;left: 185px;">Boots</span><br>
        <select id="wrist_ench_dd" class="enchant-select">
            <option value="wrist">wrist</option>
            <option value="+7 strength">+7 strength</option>
            <option value="+9 strength">+9 strength</option>
        </select>

        <select id="hands_ench_dd" class="enchant-select">
            <option value="hands">hands</option>
            <option value="+7 agility">+7 agility</option>
            <option value="+15 agility">+15 agility</option>
            <option value="+7 strength">+7 strength</option>
            <option value="+1 haste">+1 haste</option>
        </select>

        <select id="legs_ench_dd" class="enchant-select">
            <option value="legs">legs</option>
            <option value="+8 strength">+8 strength</option>
            <option value="+1 haste">+1 haste</option>
        </select>

        <select id="boots_ench_dd" class="enchant-select">
            <option value="boots">boots</option>
            <option value="+7 agility">+7 agility</option>
            <option value="minor speed">minor speed</option>
        </select>

        <p></p>
        <span>Main-Hand</span>
        <span style="position: relative;left: 25px;">Off-Hand</span><br>
        <select id="main_hand_ench_dd" class="enchant-select">
            <option value="main_hand">weapon</option>
            <option value="crusader">crusader</option>
            <option value="+15 agility">+15 agility</option>
            <option value="+15 strength">+15 strength</option>
        </select>

        <select id="off_hand_ench_dd" class="enchant-select">
            <option value="off_hand">off_hand</option>
            <option value="crusader">crusader</option>
            <option value="+15 agility">+15 agility</option>
            <option value="+15 strength">+15 strength</option>
        </select>
    </div>
    <br><br>

    <button type="button" class="collapsible">Talents</button>
    <div class="content">
        <b>Presets:</b><br>
        <button onclick="load_talent_standard_fury()">Standard Fury</button>
        <button onclick="load_talent_cleave_fury()">Cleave Fury</button>
        <button onclick="load_talent_two_hand_fury()">Two Hand Fury</button>
        <button onclick="load_talent_clear()">Clear</button>
        <br><br>
        <b id="total_points">Total points: </b>
        <br>
        (Talents with dotted black lines around them are not implemented.)

        <table class="talents arms">
            <tbody>
            <tr>
                <th id="arms_title" colspan="4">Arms</th>
            </tr>
            <tr>
                <td>
                    <div class="icon" data-count="0" data-x="0" data-y="0" id="improved_heroic_strike_talent"
                         data-max="3">
                        <img src="images/ability_rogue_ambush.jpg" alt="Improved Heroic Strike"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="0" id="deflection_talent" data-max="5">
                        <img src="images/ability_parry.jpg" alt="Deflection"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="0" id="improved_rend_talent" data-max="3">
                        <img src="images/ability_gouge.jpg" alt="Improved Rend"></div>
                </td>
                <td></td>
            </tr>
            <tr>
                <td>
                    <div class="icon" data-count="0" data-x="0" data-y="1" id="improved_charge_talent" data-max="2">
                        <img src="images/ability_warrior_charge.jpg" alt="Improved Charge"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="1" id="tactical_mastery_talent" data-max="5">
                        <img
                                src="images/spell_nature_enchantarmor.jpg" alt="Tactical Mastery"></div>
                </td>
                <td></td>
                <td>
                    <div class="icon" data-count="0" data-x="3" data-y="1" id="improved_thunder_clap_talent"
                         data-max="3">
                        <img src="images/ability_thunderclap.jpg" alt="Improved Thunder Clap"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="icon" data-count="0" data-x="0" data-y="2" id="improved_overpower_talent" data-max="2">
                        <img src="images/inv_sword_05.jpg" alt="Improved Overpower"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="2" id="anger_management_talent" data-max="1">
                        <img src="images/spell_holy_blessingofstamina.jpg" alt="Anger Management"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="2" id="deep_wounds_talent" data-max="3">
                        <img src="images/ability_backstab.jpg" alt="Deep Wounds"></div>
                </td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="3" id="two_handed_weapon_specialization_talent"
                         data-max="5">
                        <img src="images/inv_axe_09.jpg" alt="Two-Handed Weapon Specialization"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="3" id="impale_talent" data-max="2">
                        <img src="images/ability_searingarrow.jpg" alt="Impale"></div>
                </td>
                <td></td>
            </tr>
            <tr>
                <td>
                    <div class="icon" data-count="0" data-x="0" data-y="4" id="axe_specialization_talent" data-max="5">
                        <img src="images/inv_axe_06.jpg" alt="Axe Specialization"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="4" id="sweeping_strikes_talent" data-max="1">
                        <img src="images/ability_rogue_slicedice.jpg" alt="Sweeping Strikes"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="4" id="mace_specialization_talent" data-max="5">
                        <img src="images/inv_mace_01.jpg" alt="Mace Specialization"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="3" data-y="4" id="sword_specialization_talent"
                         data-max="5">
                        <img src="images/inv_sword_27.jpg" alt="Sword Specialization"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="icon" data-count="0" data-x="0" data-y="5" id="polearm_specialization_talent"
                         data-max="5">
                        <img src="images/inv_weapon_halbard_01.jpg" alt="Polearm Specialization"></div>
                </td>
                <td></td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="5" id="improved_hamstring_talent" data-max="3">
                        <img src="images/ability_shockwave.jpg" alt="Improved Hamstring"></div>
                </td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="6" id="mortal_strike_talent" data-max="1">
                        <img src="images/ability_warrior_savageblow.jpg" alt="Mortal Strike"></div>
                </td>
                <td></td>
                <td></td>
            </tr>
            </tbody>
        </table>
        <table class="talents fury">
            <tbody>
            <tr>
                <th id="fury_title" colspan="4">Fury</th>
            </tr>
            <tr>
                <td></td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="0" id="booming_voice_talent" data-max="5">
                        <img src="images/spell_nature_purge.jpg" alt="Booming Voice"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="0" id="cruelty_talent" data-max="5">
                        <img src="images/ability_rogue_eviscerate.jpg" alt="Cruelty"></div>
                </td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="1" id="improved_demoralizing_shout_talent"
                         data-max="5">
                        <img src="images/ability_warrior_warcry.jpg" alt="Improved Demoralizing Shout"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="1" id="unbridled_wrath_talent" data-max="5">
                        <img src="images/spell_nature_stoneclawtotem.jpg" alt="Unbridled Wrath"></div>
                </td>
                <td></td>
            </tr>
            <tr>
                <td>
                    <div class="icon" data-count="0" data-x="0" data-y="2" id="improved_cleave_talent" data-max="3">
                        <img src="images/ability_warrior_cleave.jpg" alt="Improved Cleave"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="2" id="peircing_howl_talent" data-max="1">
                        <img src="images/spell_shadow_deathscream.jpg" alt="Piercing Howl"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="2" id="blood_craze_talent" data-max="3">
                        <img src="images/spell_shadow_summonimp.jpg" alt="Blood Craze"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="3" data-y="2" id="improved_battle_shout_talent"
                         data-max="5">
                        <img src="images/ability_warrior_battleshout.jpg" alt="Improved Battle Shout"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="icon" data-count="0" data-x="0" data-y="3" id="dual_wield_specialization_talent"
                         data-max="5">
                        <img src="images/ability_dualwield.jpg" alt="Dual Wield Specialization"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="3" id="improved_execute_talent" data-max="2">
                        <img src="images/inv_sword_48.jpg" alt="Improved Execute"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="3" id="enrage_talent" data-max="5">
                        <img src="images/spell_shadow_unholyfrenzy.jpg" alt="Enrage"></div>
                </td>
                <td></td>
            </tr>
            <tr>
                <td>
                    <div class="icon" data-count="0" data-x="0" data-y="4" id="improved_slam_talent" data-max="5">
                        <img src="images/ability_warrior_decisivestrike.jpg" alt="Improved Slam"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="4" id="death_wish_talent" data-max="1">
                        <img src="images/spell_shadow_deathpact.jpg" alt="Death Wish"></div>
                </td>
                <td></td>
                <td>
                    <div class="icon" data-count="0" data-x="3" data-y="4" id="improved_intercept_talent" data-max="2">
                        <img src="images/ability_rogue_sprint.jpg" alt="Improved Intercept"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="icon" data-count="0" data-x="0" data-y="5" id="improved_berserker_rage_talent"
                         data-max="2">
                        <img src="images/spell_nature_ancestralguardian.jpg" alt="Improved Berserker Rage"></div>
                </td>
                <td></td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="5" id="flurry_talent" data-max="5">
                        <img src="images/ability_ghoulfrenzy.jpg" alt="Flurry">
                    </div>
                </td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="6" id="bloodthirst_talent" data-max="1">
                        <img src="images/spell_nature_bloodlust.jpg" alt="Bloodthirst"></div>
                </td>
                <td></td>
                <td></td>
            </tr>
            </tbody>
        </table>
        <table class="talents prot">
            <tbody>
            <tr>
                <th id="prot_title" colspan="4">Protection</th>
            </tr>
            <tr>
                <td></td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="0" id="shield_specialization_talent"
                         data-max="5">
                        <img src="images/inv_shield_06.jpg" alt="Shield Specialization"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="0" id="anticipation_talent" data-max="5">
                        <img src="images/spell_nature_mirrorimage.jpg" alt="Anticipation"></div>
                </td>
                <td></td>
            </tr>
            <tr>
                <td>
                    <div class="icon" data-count="0" data-x="0" data-y="1" id="improved_bloodrage_talent" data-max="2">
                        <img src="images/ability_racial_bloodrage.jpg" alt="Improved Bloodrage"></div>
                </td>
                <td></td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="1" id="toughness_talent" data-max="5">
                        <img src="images/spell_holy_devotion.jpg" alt="Toughness"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="3" data-y="1" id="iron_will_talent" data-max="5">
                        <img src="images/spell_magic_magearmor.jpg" alt="Iron Will"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="icon" data-count="0" data-x="0" data-y="2" id="last_stand_talent" data-max="1">
                        <img src="images/spell_holy_ashestoashes.jpg" alt="Last Stand"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="2" id="improved_shield_block_talent"
                         data-max="3">
                        <img src="images/ability_defend.jpg" alt="Improved Shield Block"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="2" id="improved_revenge_talent" data-max="3">
                        <img src="images/ability_warrior_revenge.jpg" alt="Improved Revenge"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="3" data-y="2" id="defiance_talent" data-max="5">
                        <img src="images/ability_warrior_innerrage.jpg" alt="Defiance"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="icon" data-count="0" data-x="0" data-y="3" id="improved_sunder_armor_talent"
                         data-max="3">
                        <img src="images/ability_warrior_sunder.jpg" alt="Improved Sunder Armor"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="3" id="improved_disarm_talent" data-max="3">
                        <img src="images/ability_warrior_disarm.jpg" alt="Improved Disarm"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="3" id="improved_taunt_talent" data-max="2">
                        <img src="images/spell_nature_reincarnation.jpg" alt="Improved Taunt"></div>
                </td>
                <td></td>
            </tr>
            <tr>
                <td>
                    <div class="icon" data-count="0" data-x="0" data-y="4" id="improved_shield_wall_talent"
                         data-max="2">
                        <img src="images/ability_warrior_shieldwall.jpg" alt="Improved Shield Wall"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="4" id="concussion_blow_talent" data-max="1">
                        <img src="images/ability_thunderbolt.jpg" alt="Concussion Blow"></div>
                </td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="4" id="improved_shield_bash_talent"
                         data-max="2">
                        <img src="images/ability_warrior_shieldbash.jpg" alt="Improved Shield Bash"></div>
                </td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td>
                    <div class="icon" data-count="0" data-x="2" data-y="5" id="one_handed_weapon_specialization_talent"
                         data-max="5">
                        <img src="images/inv_sword_20.jpg" alt="One-Handed Weapon Specialization"></div>
                </td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <div class="icon" data-count="0" data-x="1" data-y="6" id="shield_slam_talent" data-max="1">
                        <img src="images/inv_shield_05.jpg" alt="Shield Slam"></div>
                </td>
                <td></td>
                <td></td>
            </tr>
            </tbody>
        </table>
    </div>
    <br><br>

    <button type="button" class="collapsible">Buffs and Consumables</button>
    <div class="content">
        <div class="checkbox_div">
            <p class="select-title">World buffs:</p><br>
            <input type="checkbox" id="rallying_cry" checked>
            <label for="rallying_cry"> Rallying Cry of the Dragon Slayer</label><br>

            <input type="checkbox" id="dire_maul" checked>
            <label for="dire_maul"> Fengus' Ferocity</label><br>

            <input type="checkbox" id="slipkiks_savy">
            <label for="slipkiks_savy"> Slip'kik's Savvy</label><br>

            <input type="checkbox" id="songflower">
            <label for="songflower"> Songflower Serenade</label><br>

            <input type="checkbox" id="warchiefs_blessing">
            <label for="warchiefs_blessing"> Warchiefs Blessing</label><br>

            <input type="checkbox" id="spirit_of_zandalar" checked>
            <label for="spirit_of_zandalar"> Spirit of Zandalar</label><br>

            <input type="checkbox" id="sayges_fortune">
            <label for="sayges_fortune"> Sayges Fortune</label><br>

            <input type="checkbox" id="traces_of_silithyst">
            <label for="traces_of_silithyst"> Traces of Silithyst</label><br><br>

            <b> Player buffs:</b><br>
            <input type="checkbox" id="battle_shout" checked>
            <label for="battle_shout"> Battle Shout</label><br>

            <input type="checkbox" id="gift_of_the_wild" checked>
            <label for="gift_of_the_wild"> Gift of the Wild</label><br>

            <input type="checkbox" id="leader_of_the_pack">
            <label for="leader_of_the_pack"> Leader of the Pack</label><br>

            <input type="checkbox" id="trueshot_aura" checked>
            <label for="trueshot_aura"> Trueshot Aura</label><br>

            <input type="checkbox" id="blessing_of_kings" checked>
            <label for="blessing_of_kings" style="color: #003d99"> Blessing of Kings</label><br>

            <input type="checkbox" id="blessing_of_might" checked>
            <label for="blessing_of_might" style="color: #003d99"> Blessing of Might</label><br>

            <input type="checkbox" id="windfury_totem">
            <label for="windfury_totem" style="color: #cc0000"> Windfury totem</label><br>

            <input type="checkbox" id="strength_of_earth_totem">
            <label for="strength_of_earth_totem" style="color: #cc0000"> Strength of earth Totem</label><br>

            <input type="checkbox" id="grace_of_air_totem">
            <label for="grace_of_air_totem" style="color: #cc0000"> Grace of Air Totem</label><br>

            <input type="checkbox" id="battle_squawk">
            <label for="battle_squawk">Battle squawk:
                <input type="number" id="battle_squawk_dd" name="quantity" min="0" max="25" value="5" step="5">% haste.
            </label><br><br>

            <b> AQ-books:</b><br>
            <input type="checkbox" id="battle_shout_aq" checked>
            <label for="battle_shout_aq"> Battle shout</label><br>

            <input type="checkbox" id="blessing_of_might_aq" checked>
            <label for="blessing_of_might_aq" style="color: #003d99"> Blessing of Might</label><br>

            <input type="checkbox" id="strength_of_earth_totem_aq">
            <label for="strength_of_earth_totem_aq" style="color: #cc0000"> Strength of earth Totem</label><br>

            <input type="checkbox" id="grace_of_air_totem_aq">
            <label for="grace_of_air_totem_aq" style="color: #cc0000"> Grace of Air Totem</label><br>

            <input type="checkbox" id="heroic_strike_aq" checked>
            <label for="heroic_strike_aq"> Heroic Strike</label><br><br>
        </div>

        <div class="checkbox_div">
            <p class="select-title">Consumables:</p><br>
            <input type="checkbox" id="elixir_mongoose" checked>
            <label for="elixir_mongoose"> Elixir of the Mongoose</label><br>

            <input type="checkbox" id="blessed_sunfruit" onclick=
                    "if (document.getElementById('smoked_dessert_dumplings').checked)
                {
                    document.getElementById('smoked_dessert_dumplings').checked = false;
                }" checked>
            <label for="blessed_sunfruit"> Blessed Sunfruit</label><br>

            <input type="checkbox" id="smoked_dessert_dumplings" onclick=
                    "if (document.getElementById('blessed_sunfruit').checked)
                {
                    document.getElementById('blessed_sunfruit').checked = false;
                }">
            <label for="smoked_dessert_dumplings"> Smoked Desert Dumplings</label><br>

            <input type="checkbox" id="juju_might" onclick=
                    "if (document.getElementById('winterfall_firewater').checked)
                {
                    document.getElementById('winterfall_firewater').checked = false;
                }">
            <label for="juju_might"> Juju Might</label><br>

            <input type="checkbox" id="winterfall_firewater" onclick=
                    "if (document.getElementById('juju_might').checked)
                {
                    document.getElementById('juju_might').checked = false;
                }">
            <label for="winterfall_firewater"> Winterfall Firewater</label><br>

            <input type="checkbox" id="juju_power" onclick=
                    "if (document.getElementById('elixir_of_giants').checked)
                {
                    document.getElementById('elixir_of_giants').checked = false;
                }" checked>
            <label for="juju_power"> Juju Power</label><br>

            <input type="checkbox" id="elixir_of_giants" onclick=
                    "if (document.getElementById('juju_power').checked)
                {
                    document.getElementById('juju_power').checked = false;
                }">
            <label for="elixir_of_giants"> Elixir of Giants</label><br>

            <input type="checkbox" id="roids">
            <label for="roids"> R.O.I.D.S</label><br>

            <input type="checkbox" id="fire_toasted_bun">
            <label for="fire_toasted_bun"> Fire-Toasted Bun</label><br><br>

            <b>Weapon Stones:</b><br>
            Main-hand:<br>
            <input type="checkbox" id="dense_stone_main_hand"
                   onclick="unique_checkboxes_unselect('dense_stone_main_hand', ['elemental_stone_main_hand', 'consecrated_sharpening_stone_main_hand'] )"
                   checked>
            <label for="dense_stone_main_hand"> Dense Stone</label><br>

            <input type="checkbox" id="elemental_stone_main_hand"
                   onclick="unique_checkboxes_unselect('elemental_stone_main_hand', ['dense_stone_main_hand', 'consecrated_sharpening_stone_main_hand'] )">
            <label for="elemental_stone_main_hand"> Elemental Stone</label><br>

            <input type="checkbox" id="consecrated_sharpening_stone_main_hand"
                   onclick="unique_checkboxes_unselect('consecrated_sharpening_stone_main_hand', ['elemental_stone_main_hand', 'dense_stone_main_hand'] )">
            <label for="consecrated_sharpening_stone_main_hand"> Consecrated Stone</label><br>

            Off-hand:<br>
            <input type="checkbox" id="dense_stone_off_hand"
                   onclick="unique_checkboxes_unselect('dense_stone_off_hand', ['elemental_stone_off_hand', 'consecrated_sharpening_stone_off_hand'] )"
                   checked>
            <label for="dense_stone_off_hand"> Dense Stone</label><br>

            <input type="checkbox" id="elemental_stone_off_hand"
                   onclick="unique_checkboxes_unselect('elemental_stone_off_hand', ['consecrated_sharpening_stone_off_hand', 'dense_stone_off_hand'] )">
            <label for="elemental_stone_off_hand"> Elemental Stone Off Hand</label><br>

            <input type="checkbox" id="consecrated_sharpening_stone_off_hand"
                   onclick="unique_checkboxes_unselect('consecrated_sharpening_stone_off_hand', ['elemental_stone_off_hand', 'dense_stone_off_hand'] )">
            <label for="consecrated_sharpening_stone_off_hand"> Consecrated Stone</label>
            <br><br>

            <b> Talents:</b><br>
            <input type="checkbox" id="improved_weapon_totems">
            <label for="improved_weapon_totems" style="color: #cc0000"> Improved Weapon Totems</label><br>

            <input type="checkbox" id="enhancing_totems">
            <label for="enhancing_totems" style="color: #cc0000"> Enhancing Totems</label><br><br>
        </div>
    </div>
    <br><br>

    <button type="button" class="collapsible">Cooldowns and Rotation</button>
    <div class="content">
        <b>Cooldowns:</b><br>
        (Cooldowns are queued towards the end of the fight, with a one second margin)<br>
        <input type="checkbox" id="death_wish" checked>
        <label for="death_wish"> Use death wish</label><br>

        <input type="checkbox" id="enable_blood_fury">
        <label for="enable_blood_fury" style="color: #cc0000"> Use blood fury</label><br>

        <input type="checkbox" id="enable_berserking">
        <label for="enable_berserking" style="color: #cc0000"> Use berserking (increases haste by
            <input type="number" id="berserking_haste_dd" name="quantity" min="10" max="30" value="10"> %).</label><br>

        <input type="checkbox" id="mighty_rage_potion">
        <label for="mighty_rage_potion"> Use mighty rage potion</label><br>

        <input type="checkbox" id="recklessness">
        <label for="recklessness"> Use recklessness</label><br><br>

        <b>Combat policy:</b><br>
        <div class="hide_description" id="bloodthirst_talent_div">
            <input type="checkbox" id="use_bloodthirst" checked
                   onclick="show_div('use_bloodthirst', 'bloodthirst_div')">
            <label for="use_bloodthirst"><b> Use bloodthirst</b></label><br>
            <div class="description" id="bloodthirst_div">
                <input type="checkbox" id="use_bt_in_exec_phase">
                <label for="use_bt_in_exec_phase"> Use bloodthirst in execute phase</label><br>
            </div>
        </div>

        <div class="hide_description" id="mortal_strike_talent_div">
            <input type="checkbox" id="use_mortal_strike" checked
                   onclick="show_div('use_mortal_strike', 'mortal_strike_div')">
            <label for="use_mortal_strike"><b> Use mortal strike</b></label><br>
            <div class="description" id="mortal_strike_div">
                <input type="checkbox" id="use_ms_in_exec_phase">
                <label for="use_ms_in_exec_phase"> Use mortal strike in execute phase</label><br>
            </div>
        </div>

        <div class="hide_description" id="sweeping_strikes_talent_div">
            <input type="checkbox" id="use_sweeping_strikes" checked
                   onclick="show_div('use_sweeping_strikes', 'sweeping_strikes_div')">
            <label for="use_sweeping_strikes"><b> Use sweeping strikes</b></label><br>
            <div class="description" id="sweeping_strikes_div">
                (Got an idea of more options here?)<br>
                <input type="checkbox" id="dont_use_hm_when_ss">
                <label for="dont_use_hm_when_ss"> Dont use hamstring when sweeping strikes is active.</label><br>
            </div>
        </div>

        <input type="checkbox" id="use_whirlwind" checked onclick="show_div('use_whirlwind', 'whirlwind_div')">
        <label for="use_whirlwind"><b> Use whirlwind</b></label><br>
        <div class="description" id="whirlwind_div">
            <label for="whirlwind_rage_thresh_dd">Whirlwind when rage is above:</label>
            <input type="number" id="whirlwind_rage_thresh_dd" name="quantity" min="0" max="100" value="0"><br>
            <label for="whirlwind_bt_cooldown_thresh_dd">Whirlwind when bloodthirst CD is above:</label>
            <input type="number" id="whirlwind_bt_cooldown_thresh_dd" name="quantity" min="0" max="6" value="1.5"
                   step="0.1"><br>
        </div>

        <input type="checkbox" id="use_slam" checked onclick="show_div('use_slam', 'slam_div')">
        <label for="use_slam"><b> Use slam (Two-handed weapons only)</b></label><br>
        <div class="description" id="slam_div">
            <label for="slam_cd_thresh_dd">Cast slam when bloodthirst/whirlwind CD is above:</label>
            <input type="number" id="slam_cd_thresh_dd" name="quantity" min="0" max="6.0" value="1.0" step="0.1"><br>
            <label for="slam_rage_dd">Cast slam after a melee hit if rage is above:</label>
            <input type="number" id="slam_rage_dd" name="quantity" min="15" max="100" value="15"><br>
            <label for="slam_spam_rage_dd">Spam slam when rage is above:</label>
            <input type="number" id="slam_spam_rage_dd" name="quantity" min="15" max="100" value="50"><br>
            <label for="slam_spam_max_time_dd">Never cast slam when weapon swing timer is less than:</label>
            <input type="number" id="slam_spam_max_time_dd" name="quantity" min="0.0" max="4.0" value="1.5"
                   step="0.1"><br>
        </div>

        <input type="checkbox" id="use_overpower" checked onclick="show_div('use_overpower', 'overpower_div')">
        <label for="use_overpower"><b> Use overpower</b></label><br>
        <div class="description" id="overpower_div">
            <label for="overpower_rage_thresh_dd">Overpower when rage is below:</label>
            <input type="number" id="overpower_rage_thresh_dd" name="quantity" min="0" max="100" value="50"><br>
            <label for="overpower_bt_cooldown_thresh_dd">Overpower when bloodthirst CD is above:</label>
            <input type="number" id="overpower_bt_cooldown_thresh_dd" name="quantity" min="0" max="6" value="3.0"
                   step="0.1"><br>
            <label for="overpower_ww_cooldown_thresh_dd">Overpower when whirlwind CD is above:</label>
            <input type="number" id="overpower_ww_cooldown_thresh_dd" name="quantity" min="0" max="10" value="3.0"
                   step="0.1"><br>
        </div>

        <input type="checkbox" id="use_heroic_strike" checked
               onclick="show_div('use_heroic_strike', 'heroic_strike_div')">
        <label for="use_heroic_strike"><b> Use Heroic Strike</b></label><br>
        <div class="description" id="heroic_strike_div">
            <label for="heroic_strike_rage_thresh_dd">Heroic strike when rage is above:</label>
            <input type="number" id="heroic_strike_rage_thresh_dd" name="quantity" min="0" max="100" value="50"><br>
            <input type="checkbox" id="use_hs_in_exec_phase">
            <label for="use_hs_in_exec_phase"> Use heroic strike in execute phase</label><br>
        </div>

        <input type="checkbox" id="cleave_if_adds" onclick="show_div('cleave_if_adds', 'cleave_div')">
        <label for="cleave_if_adds"> <b>Use cleave</b> (used if there are more than one target.)</label><br>
        <div class="description" id="cleave_div">
            <label for="cleave_rage_thresh_dd">Cleave when rage is above:</label>
            <input type="number" id="cleave_rage_thresh_dd" name="quantity" min="0" max="100" value="50"><br>
        </div>

        <input type="checkbox" id="use_hamstring" onclick="show_div('use_hamstring', 'hamstring_div')">
        <label for="use_hamstring"><b> Use hamstring</b></label><br>
        <div class="description" id="hamstring_div">
            <label for="hamstring_cd_thresh_dd">Hamstring when bloodthirst/Whirlwind CD is above:</label>
            <input type="number" id="hamstring_cd_thresh_dd" name="quantity" min="0" max="6" value="2.0" step="0.1"><br>
            <label for="hamstring_thresh_dd">Hamstring when rage is above:</label>
            <input type="number" id="hamstring_thresh_dd" name="quantity" min="0" max="100" value="70"><br>
        </div>

        <input type="checkbox" id="ability_queue" onclick="show_div('ability_queue', 'ability_queue_div')">
        <label for="ability_queue"><b> Ability queue</b></label><br>
        <div class="description" id="ability_queue_div">
            Instantly re-queue HS/Cleave after an extra attack has been triggered.<br>
            <label for="re_queue_abilities_dd">Re-queue if rage is above:</label>
            <input type="number" id="re_queue_abilities_dd" name="quantity" min="0" max="100" value="70"> <u>before</u>
            the extra attack.<br>
        </div>
        <br>
        <b>Other: </b><br>
        <input type="checkbox" id="first_global_sunder" checked>
        <label for="first_global_sunder"> Sunder armor the first GCD.</label><br>

        <input type="checkbox" id="first_hit_heroic_strike">
        <label for="first_hit_heroic_strike"> Queue Heroic strike on the first melee hit.</label><br>

    </div>
    <br><br>

    <button type="button" class="collapsible">Target and miscellaneous</button>
    <div class="content">
        <b>Fight length:</b><br>
        <label for="fight_time_dd">Fight duration: (10-300s):</label>
        <input type="number" id="fight_time_dd" name="quantity" min="10" max="300" value="60"><br>

        <label for="execute_phase_percentage_dd">Execute phase duration (% of fight) </label>
        <input type="number" id="execute_phase_percentage_dd" name="quantity" min="0" max="100" value="15"><br><br>

        <b>Target settings:</b><br>
        <label for="boss_armor_dd">Boss armor (default 3731): </label>
        <input type="number" id="boss_armor_dd" name="quantity" min="0" max="10000" value="3731"><br>
        <label for="opponent_level_dd">Opponent level: (60-63):</label>
        <input type="number" id="opponent_level_dd" name="quantity" min="60" max="63" value="63"><br><br>

        <b>Multi-target mode:</b><br>
        <input type="checkbox" id="multi_target_mode" onclick="show_div('multi_target_mode', 'multi_target_div')">
        <label for="multi_target_mode">Multi-target mode enabled</label><br>
        <div class="description" id="multi_target_div">
            <label for="number_of_extra_targets_dd">Number of extra targets (1-4):</label>
            <input type="number" id="number_of_extra_targets_dd" name="quantity" min="1" max="4" value="2"><br>
            <label for="extra_target_armor_dd">Extra targets armor:</label>
            <input type="number" id="extra_target_armor_dd" name="quantity" min="0" max="10000" value="3000"><br>
            <label for="extra_target_level_dd">Extra targets level (60-63):</label>
            <input type="number" id="extra_target_level_dd" name="quantity" min="60" max="63" value="60"><br>
            <label for="extra_target_duration_dd">Extra targets die at (% of fight):</label>
            <input type="number" id="extra_target_duration_dd" name="quantity" min="1" max="100" value="100"><br>
        </div>
        <br>

        <b>Armor reduction:</b><br>
        <label for="sunder_armor_dd">Sunder armor stacks: (0-5):</label>
        <input type="number" id="sunder_armor_dd" name="quantity" min="0" max="5" value="5"><br>
        <input type="checkbox" id="exposed_armor">
        <label for="exposed_armor"> Improved exposed armor applied after 6-7 seconds (replaces sunder armor)</label><br>
        <input type="checkbox" id="faerie_fire" checked>
        <label for="faerie_fire"> Faerie fire active</label><br>
        <input type="checkbox" id="curse_of_recklessness" checked>
        <label for="curse_of_recklessness"> Curse of recklessness active</label><br><br>

        <b>Boss debuffs:</b><br>
        <input type="checkbox" id="essence_of_the_red">
        <label for="essence_of_the_red"> Vaelastrasz: Essence of the Red</label><br>

        <input type="checkbox" id="fungal_bloom">
        <label for="fungal_bloom"> Loatheb: Fungal Bloom (+50% crit)</label><br>

        <input type="checkbox" id="full_polarity">
        <label for="full_polarity"> Thaddius: Full Polarity
            <input type="number" id="full_polarity_dd" name="quantity" min="0" max="400" value="190" step="10">% damage
            increase.
        </label><br><br>

        <b>Other:</b><br>
        <label for="initial_rage_dd">Initial rage when fight starts:</label>
        <input type="number" id="initial_rage_dd" name="quantity" min="0" max="100" value="0"><br>

        <input type="checkbox" id="periodic_damage" onclick="show_div('periodic_damage', 'periodic_damage_div')">
        <label for="periodic_damage">Enable taking periodic damage </label><br>
        <div class="description" id="periodic_damage_div">
            <label for="periodic_damage_interval_dd">Time between taking damage:</label>
            <input type="number" id="periodic_damage_interval_dd" name="quantity" min="1" max="5" value="2"><br>
            <label for="periodic_damage_amount_dd">Damage amount:</label>
            <input type="number" id="periodic_damage_amount_dd" name="quantity" min="0" max="1000" value="300"><br>
            <input type="checkbox" id="can_trigger_enrage" disabled>
            <label for="can_trigger_enrage"> Damage can trigger Enrage (coming soon!) </label><br>
        </div>

        <input type="checkbox" id="deep_wounds">
        <label for="deep_wounds"> Enable deep wounds.</label><br>

    </div>
    <br><br>

    <button type="button" class="collapsible">Simulator settings</button>
    <div class="content">
        <label for="n_simulations_dd">Number of simulations (DPS): (1 - 1.000.000):</label>
        <input type="number" id="n_simulations_dd" name="quantity" min="1" max="1000000" value="50000"><br>

        <label for="n_simulations_stat_dd">Number of simulations (per stat weight): (1 - 100.000):</label>
        <input type="number" id="n_simulations_stat_dd" name="quantity" min="1" max="100000" value="20000"><br>

        <label for="n_simulations_talent_dd">Number of simulations (per talent): (1 - 20.000):</label>
        <input type="number" id="n_simulations_talent_dd" name="quantity" min="1" max="20000" value="5000"><br><br>

        <b>Compute stat weights (adds extra simulations):</b><br>
        <input type="checkbox" id="stat_weight_crit" checked>
        <label for="stat_weight_crit"> &plusmn 1% crit.</label><br>

        <input type="checkbox" id="stat_weight_hit" checked>
        <label for="stat_weight_hit"> &plusmn 1% hit.</label><br>

        <input type="checkbox" id="stat_weight_haste">
        <label for="stat_weight_haste"> &plusmn 1% haste.</label><br>

        <input type="checkbox" id="stat_weight_extra_hit">
        <label for="stat_weight_extra_hit"> + 1% chance for extra attack.</label><br>

        <input type="checkbox" id="stat_weight_skill">
        <label for="stat_weight_skill"> &plusmn <input type="number" id="stat_weight_skill_dd" name="quantity" min="1"
                                                       max="15" value="5"> weapon skill. (1-15)</label><br>

        <input type="checkbox" id="stat_weight_mh_speed">
        <label for="stat_weight_mh_speed"> &plusmn <input type="number" id="stat_weight_mh_speed_dd" name="quantity"
                                                          min=".1" max="1.0" value="0.5" step="0.1"> seconds main-hand
            weapon speed. (0,1s-1,0s) </label><br>

        <input type="checkbox" id="stat_weight_oh_speed">
        <label for="stat_weight_oh_speed"> &plusmn <input type="number" id="stat_weight_oh_speed_dd" name="quantity"
                                                          min=".1" max="1.0" value="0.5" step="0.1"> seconds off-hand
            weapon speed. (0,1s-1,0s) </label><br><br>

        <b>Other settings:</b><br>
        <input type="checkbox" id="compute_dpr">
        <label for="compute_dpr"> Compute DPR values for abilities.</label><br>

        <input type="checkbox" id="talents_stat_weights">
        <label for="talents_stat_weights"> Compute the value of the various talents in the DW Fury
            build.</label><br><br>

        <b>Debug:</b><br>
        <input type="checkbox" id="debug_on">
        <label for="debug_on"> Display combat debug information for the median fight.</label><br>
    </div>

    <p></p>
    <button class="run_sim_button" onclick="run_sim()">Run simulator</button>

    <h2>----------- RESULTS BELOW -----------</h2>
    <div id="loader">
        <div>
        </div>
    </div>

    <p id="output1"></p>

    <!--    <table class="results_table">-->
    <!--        <tbody>-->
    <!--        <tr>-->
    <!--            <th id="results_title" colspan="4">Results</th>-->
    <!--        </tr>-->
    <!--        <tr>-->
    <!--            <td></td>-->
    <!--            <td>-->
    <!--                asdasd1-->
    <!--            </td>-->
    <!--            <td>-->
    <!--                asdasd2-->
    <!--            </td>-->
    <!--            <td></td>-->
    <!--        </tr>-->
    <!--        </tbody>-->
    <!--    </table>-->

    <p id="output2"></p>

    <p id="output3"></p>

    <p id="output4"></p>

    <p id="combat_debug_title"></p>
    <div id="combat_debug" class="scroll" hidden>
        <div>
        </div>
    </div>

    <canvas id="line-chart-hist"></canvas>

    <p></p>
    <canvas id="line-chart-fight"></canvas>

    <p></p>
    <canvas id="line-chart-fight-cumulative"></canvas>

    <p></p>
    <canvas id="bar-chart-cooldowns"></canvas>

    <p></p>
    <canvas id="bar-chart-damage"></canvas>

    <p></p>
    <canvas id="bar-chart-auras"></canvas>

    <p></p>
    <canvas id="bar-chart-proc"></canvas>
</div>


<script>
    function show_div(box, div) {
        if (document.getElementById(box).checked === true) {
            document.getElementById(div).style.display = "block";
        } else {
            document.getElementById(div).style.display = "none";
        }
    }

    function unique_checkboxes(clicked_box, list_of_boxes) {
        for (let box of list_of_boxes) {
            if (document.getElementById(box).checked) {
                document.getElementById(box).checked = false;
            }
        }
        document.getElementById(clicked_box).checked = true;
    }

    function unique_checkboxes_unselect(clicked_box, list_of_boxes) {
        for (let box of list_of_boxes) {
            document.getElementById(box).checked = false;
        }
    }

    function unique_div(divs_to_show, divs_to_hide) {
        for (let div_to_show of divs_to_show) {
            document.getElementById(div_to_show).style.display = "block";
        }
        for (let div_to_hide of divs_to_hide) {
            document.getElementById(div_to_hide).style.display = "none";
        }
    }

    let coll = document.getElementsByClassName("collapsible");

    for (let i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function () {
            this.classList.toggle("active");
            let content = this.nextElementSibling;
            if (content.style.display === "block") {
                content.style.display = "none";
            } else {
                content.style.display = "block";
            }
            for (let j = 0; j < coll.length; j++) {
                if (coll[j] !== this) {
                    let other_content = coll[j].nextElementSibling;
                    other_content.style.display = "none";
                }
            }
        });
    }

    function open_armor() {
        document.getElementById("armor_n_wep").click();
    }

    let world_buffs = ["rallying_cry", "dire_maul", "slipkiks_savy", "songflower", "warchiefs_blessing",
        "spirit_of_zandalar", "sayges_fortune", "traces_of_silithyst"];
    let world_buffs_input = [];

    let buffs = ["battle_shout", "blessing_of_kings", "blessing_of_might", "gift_of_the_wild", "leader_of_the_pack", "trueshot_aura",
        "windfury_totem", "strength_of_earth_totem", "grace_of_air_totem"];
    let buffs_input = [];

    let consumables = ["elixir_mongoose", "blessed_sunfruit", "smoked_dessert_dumplings", "juju_power",
        "elixir_of_giants", "winterfall_firewater", "juju_might", "roids", "dense_stone_main_hand",
        "elemental_stone_main_hand", "dense_stone_off_hand", "elemental_stone_off_hand",
        "consecrated_sharpening_stone_main_hand", "consecrated_sharpening_stone_off_hand",
        "battle_shout_aq", "blessing_of_might_aq", "fire_toasted_bun", "strength_of_earth_totem_aq",
        "grace_of_air_totem_aq", "improved_weapon_totems", "enhancing_totems"];
    let consumables_input = [];

    let armor = ["helmet_dd", "neck_dd", "shoulder_dd", "back_dd",
        "chest_dd", "wrists_dd", "hands_dd", "belt_dd", "legs_dd",
        "boots_dd", "ring1_dd", "ring2_dd", "trinket1_dd", "trinket2_dd", "ranged_dd"];
    let armor_input = [];

    let weapons = ["main_hand_dd", "off_hand_dd", "two_hand_dd"];
    let weapons_input = [];

    let armor_mult = ["helmet_dd_mult", "neck_dd_mult", "shoulder_dd_mult", "back_dd_mult",
        "chest_dd_mult", "wrists_dd_mult", "hands_dd_mult", "belt_dd_mult", "legs_dd_mult",
        "boots_dd_mult", "ring_dd_mult", "trinket_dd_mult", "ranged_dd_mult"];
    let armor_input_mult = [];

    let weapons_mult = ["weapons_dd_mult", "two_hand_weapons_dd_mult"];
    let weapons_input_mult = [];

    let enchants = ["helmet_ench_dd", "shoulder_ench_dd", "back_ench_dd", "chest_ench_dd", "wrist_ench_dd",
        "hands_ench_dd", "legs_ench_dd", "boots_ench_dd", "main_hand_ench_dd", "off_hand_ench_dd"];
    let enchant_prefixes = ["e", "s", "b", "c", "w", "h", "l", "b", "m", "o"];
    let enchants_input = [];

    let float_options = ["n_simulations_dd", "n_simulations_stat_dd", "n_simulations_talent_dd",
        "opponent_level_dd", "boss_armor_dd", "fight_time_dd",
        "sunder_armor_dd", "heroic_strike_rage_thresh_dd", "cleave_rage_thresh_dd", "whirlwind_rage_thresh_dd",
        "whirlwind_bt_cooldown_thresh_dd", "overpower_rage_thresh_dd", "overpower_bt_cooldown_thresh_dd",
        "overpower_ww_cooldown_thresh_dd", "hamstring_cd_thresh_dd", "initial_rage_dd", "hamstring_thresh_dd",
        "max_optimize_time_dd", "number_of_extra_targets_dd", "extra_target_armor_dd", "extra_target_level_dd",
        "periodic_damage_interval_dd", "periodic_damage_amount_dd", "execute_phase_percentage_dd",
        "re_queue_abilities_dd", "stat_weight_skill_dd", "stat_weight_mh_speed_dd", "stat_weight_oh_speed_dd",
        "slam_spam_max_time_dd", "slam_cd_thresh_dd", "slam_spam_rage_dd", "slam_rage_dd", "berserking_haste_dd",
        "full_polarity_dd", "extra_target_duration_dd", "battle_squawk_dd"];

    let sim_options = ["faerie_fire", "exposed_armor", "curse_of_recklessness", "death_wish", "enable_blood_fury",
        "enable_berserking", "recklessness", "mighty_rage_potion", "debug_on", "use_bt_in_exec_phase", "use_hs_in_exec_phase",
        "cleave_if_adds", "use_hamstring", "use_bloodthirst", "use_whirlwind", "use_overpower", "use_heroic_strike",
        "item_strengths", "wep_strengths", "deep_wounds", "heroic_strike_aq", "compute_dpr", "talents_stat_weights",
        "multi_target_mode", "essence_of_the_red", "periodic_damage", "can_trigger_enrage", "first_global_sunder",
        "ability_queue", "first_hit_heroic_strike", "use_slam", "use_ms_in_exec_phase", "use_mortal_strike",
        "use_sweeping_strikes", "dont_use_hm_when_ss", "fungal_bloom", "full_polarity", "battle_squawk"];

    let stat_weigths = ["stat_weight_hit", "stat_weight_crit", "stat_weight_haste",
        "stat_weight_extra_hit", "stat_weight_skill", "stat_weight_mh_speed", "stat_weight_oh_speed"];

    let race;
    let race_string;

    function string_is_armor(string) {
        for (let armor_string of armor) {
            if (string === armor_string) {
                return true;
            }
        }
        return false;
    }

    function string_is_weapon(string) {
        for (let weapon_string of weapons) {
            if (string === weapon_string) {
                return true;
            }
        }
        return false;
    }

    let compare_armor_input = [];
    let compare_weapons_input = [];

    function load_compare_data() {
        let file = document.getElementById("myCompareFile");
        let myFile = file.files[0];
        if (myFile !== undefined) {
            let reader = new FileReader();
            reader.readAsText(myFile);
            reader.onload = function () {
                compare_armor_input = [];
                compare_weapons_input = [];
                let rawLog = reader.result;
                let splitlog = rawLog.split("\n");
                for (let item of splitlog) {
                    let dd_name = item.split(" ");
                    if (string_is_armor(dd_name[0])) {
                        compare_armor_input.push(dd_name[1]);
                    } else if (string_is_weapon(dd_name[0])) {
                        compare_weapons_input.push(dd_name[1]);
                    }
                }
                // console.log(compare_armor_input);
            }
        }
    }

    function load_file() {
        let file = document.getElementById("myFile");
        let myFile = file.files[0];
        let reader = new FileReader();

        //set all buff-values to unchecked before loading
        for (let world_buff of world_buffs) {
            document.getElementById(world_buff).checked = false;
        }
        for (let buff of buffs) {
            document.getElementById(buff).checked = false;
        }
        for (let consumable of consumables) {
            document.getElementById(consumable).checked = false;
        }
        for (let stat_weight of stat_weigths) {
            document.getElementById(stat_weight).checked = false;
        }
        for (let sim_option of sim_options) {
            document.getElementById(sim_option).checked = false;
        }

        reader.readAsText(myFile);
        reader.onload = function () {
            let rawLog = reader.result;
            let splitlog = rawLog.split("\n");
            for (let item of splitlog) {
                let dd_name = item.split(" ");
                // console.log(dd_name[0]);
                if (dd_name.length === 2) {
                    // console.log(dd_name[1]);
                    selectElement(dd_name[0], dd_name[1])
                } else {
                    // console.log(dd_name[1] + " " + dd_name[2]);
                    selectElement(dd_name[0], dd_name[1] + " " + dd_name[2])
                }
            }
        };
        setTimeout(displayTalentBootup, 200);
        setTimeout(calcTotalTalents, 200);
    }

    function save_button() {
        read_inputs();
        let file_content = "";
        for (let i = 0; i < armor.length; i++) {
            file_content += armor[i] + " " + armor_input[i] + "\n";
        }
        for (let i = 0; i < weapons.length; i++) {
            file_content += weapons[i] + " " + weapons_input[i] + "\n";
        }
        let all_dropdowns = armor_mult.concat(weapons_mult);
        for (let dropdown of all_dropdowns) {
            let select_menu = document.getElementById(dropdown);
            for (let i = 0; i < select_menu.length; i++) {
                let item = select_menu[i];
                file_content += item.value;
                file_content += item.selected ? " true\n" : " false\n";
            }
        }
        for (let i = 0; i < enchants.length; i++) {
            let dd_string = enchants_input[i].slice(1, enchants_input[i].length);
            file_content += enchants[i] + " " + dd_string + "\n";
        }
        for (let i = 0; i < world_buffs.length; i++) {
            file_content += world_buffs[i] + " " + world_buffs_input[i] + "\n";
        }
        for (let i = 0; i < buffs.length; i++) {
            file_content += buffs[i] + " " + buffs_input[i] + "\n";
        }
        for (let i = 0; i < consumables.length; i++) {
            file_content += consumables[i] + " " + consumables_input[i] + "\n";
        }

        for (let variable of float_options) {
            file_content += variable + " " + parseFloat(document.getElementById(variable).value) + "\n";
        }

        for (let variable of stat_weigths) {
            if (document.getElementById(variable).checked) {
                file_content += variable + " " + variable + "\n";
            }
        }

        for (let variable of talents_vec) {
            file_content += variable + " " + document.getElementById(variable).getAttribute("data-count") + "\n";
        }

        for (let variable of sim_options) {
            if (document.getElementById(variable).checked) {
                file_content += variable + " " + variable + "\n";
            }
        }

        file_content += "race_dd" + " " + race_string + "\n";

        let uriContent = "data:application/octet-stream," + encodeURIComponent(file_content);
        saveAs(uriContent, "wow-fury-sim-config.txt")
    }

    function saveAs(uri, filename) {
        let link = document.createElement('a');
        if (typeof link.download === 'string') {
            document.body.appendChild(link); // Firefox requires the link to be in the body
            link.download = filename;
            link.href = uri;
            link.click();
            document.body.removeChild(link); // remove the link when done
        } else {
            location.replace(uri);
        }
    }

    function openTab(evt, cityName) {
        let i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(cityName).style.display = "block";
    }

    function read_inputs() {
        race = document.getElementById("race_dd");
        race_string = race.options[race.selectedIndex].value;

        world_buffs_input = [];
        for (let world_buff of world_buffs) {
            let temp = document.getElementById(world_buff);
            world_buffs_input.push((temp.checked) ? world_buff : "");
        }
        buffs_input = [];
        for (let buff of buffs) {
            let temp = document.getElementById(buff);
            buffs_input.push((temp.checked) ? buff : "");
        }
        consumables_input = [];
        for (let consumable of consumables) {
            let temp = document.getElementById(consumable);
            consumables_input.push((temp.checked) ? consumable : "");
        }

        armor_input = [];
        for (let armor_piece of armor) {
            let temp = document.getElementById(armor_piece);
            armor_input.push(temp.options[temp.selectedIndex].value);
        }

        weapons_input = [];
        for (let i = 0; i < weapons.length; i++) {
            let temp = document.getElementById(weapons[i]);
            if (temp.selectedIndex === -1) {
                weapons_input.push("none");
            } else {
                weapons_input.push(temp.options[temp.selectedIndex].value);
            }
        }

        armor_input_mult = [];
        for (let armor_piece of armor_mult) {
            let multi_select = document.getElementById(armor_piece);
            for (let i = 0; i < multi_select.options.length; i++) {
                if (multi_select.options[i].selected) {
                    armor_input_mult.push(multi_select.options[i].value);
                }
            }
        }

        weapons_input_mult = [];
        for (let weapon_id of weapons_mult) {
            let multi_select = document.getElementById(weapon_id);
            for (let i = 0; i < multi_select.options.length; i++) {
                if (multi_select.options[i].selected) {
                    weapons_input_mult.push(multi_select.options[i].value);
                }
            }
        }

        enchants_input = [];
        for (let i = 0; i < enchants.length; i++) {
            let temp = document.getElementById(enchants[i]);
            enchants_input.push(enchant_prefixes[i] + temp.options[temp.selectedIndex].value);
        }
    }

    let bar_chart_auras;
    let bar_chart_proc;
    let bar_chart_damage;
    let line_chart_hist;
    let line_chart_fight;
    let line_chart_fight_cum;
    let bar_chart_cooldowns;

    function clean_charts() {
        try {
            bar_chart_auras.destroy();
            bar_chart_proc.destroy();
            bar_chart_damage.destroy();
            line_chart_hist.destroy();
            line_chart_fight.destroy();
            line_chart_fight_cum.destroy();
            bar_chart_cooldowns.destroy();
        } catch (error) {
            console.log(error)
        }
    }

    function show_loader() {
        $("#loader").addClass("loader");
    }

    function hide_loader() {
        $("#loader").removeClass("loader");
    }

    async function run_sim(event) {
        show_loader();
        setTimeout(setup_simulation_context, 100);
        setTimeout(hide_loader, 100);
        event.preventDefault();
    }

    function setup_simulation_context() {

        clean_charts();
        read_inputs();

        let armor_vec = new Module.StringList();
        for (let armor_piece of armor_input) {
            armor_vec.push_back(armor_piece);
        }

        let weapons_vec = new Module.StringList();
        if (document.getElementById("two_hand_mode").checked) {
            weapons_vec.push_back(weapons_input[2]);
        } else {
            weapons_vec.push_back(weapons_input[0]);
            weapons_vec.push_back(weapons_input[1]);
        }

        let compare_armor_vec = new Module.StringList();
        let compare_weapons_vec = new Module.StringList();
        if (document.getElementById("do_comparison").checked) {
            if (compare_armor_input.length === 15) {
                for (let armor_piece of compare_armor_input) {
                    compare_armor_vec.push_back(armor_piece);
                }
            }
            if (compare_weapons_input.length === 2) {
                for (let wep of compare_weapons_input) {
                    compare_weapons_vec.push_back(wep);
                }
            }
        }

        let mult_armor_vec = new Module.StringList();
        let mult_weapons_vec = new Module.StringList();
        if (document.getElementById("multiple_mode").checked) {
            for (let armor_piece of armor_input_mult) {
                if (armor_piece !== "none") {
                    mult_armor_vec.push_back(armor_piece);
                }
            }
            for (let wep of weapons_input_mult) {
                if (wep !== "none") {
                    mult_weapons_vec.push_back(wep);
                }
            }
        }

        let buff_vec = new Module.StringList();
        for (let buff of world_buffs_input) {
            buff_vec.push_back(buff);
        }
        for (let buff of buffs_input) {
            buff_vec.push_back(buff);
        }
        for (let buff of consumables_input) {
            buff_vec.push_back(buff);
        }
        let ench_vec = new Module.StringList();
        for (let ench of enchants_input) {
            ench_vec.push_back(ench);
        }

        let options = new Module.StringList();
        for (let val of sim_options) {
            if (document.getElementById(val).checked) {
                options.push_back(val);
            }
        }

        let race_vec = new Module.StringList();
        race_vec.push_back(race_string);

        let float_options_string = new Module.StringList();
        let float_options_val = new Module.vectorDouble();
        for (let option of float_options) {
            let element = document.getElementById(option);
            let val = parseFloat(element.value);
            if (isNaN(val)) {
                val = 0;
            }
            val = Math.min(Math.max(val, element.min), element.max);
            float_options_string.push_back(option);
            float_options_val.push_back(val);
        }

        let talent_string = new Module.StringList();
        let talent_val = new Module.vectorInt();
        for (let talent of talents_vec) {
            let element = document.getElementById(talent);
            let val = parseFloat(element.getAttribute("data-count"));
            let max_val = parseFloat(element.getAttribute("data-max"));
            if (isNaN(val)) {
                console.log("NaN value when reading talents.");
                val = 0;
            }
            if (val > 0) {
                console.log(element, val);
            }
            val = Math.min(Math.max(val, 0), max_val);
            talent_string.push_back(talent);
            talent_val.push_back(val);
        }

        let n_simulations = parseInt(document.getElementById("n_simulations_dd").value);
        let n_simulations_stat = parseInt(document.getElementById("n_simulations_stat_dd").value);
        let n_simulations_talent = parseInt(document.getElementById("n_simulations_talent_dd").value);
        let total_simulations = n_simulations;
        if (document.getElementById("do_comparison").checked) {
            total_simulations *= 2;
        }
        if (document.getElementById("talents_stat_weights").checked) {
            total_simulations += n_simulations_talent * 9;
        }
        let need_to_add_for_ap = true;
        let stat_weight_vec = new Module.StringList();
        for (let stat_weight of stat_weigths) {
            if (document.getElementById(stat_weight).checked) {
                console.log(stat_weight.slice(12, stat_weight.length));
                stat_weight_vec.push_back(stat_weight.slice(12, stat_weight.length));
                total_simulations += n_simulations_stat * 2 + n_simulations_stat * 2 * need_to_add_for_ap;
                need_to_add_for_ap = false;
            }
        }

        let obj = new Module['Sim_interface']();

        if (document.getElementById("multiple_mode").checked) {
            let wow_input = {
                race: race_vec,
                armor: mult_armor_vec,
                weapons: mult_weapons_vec,
                buffs: buff_vec,
                enchants: ench_vec,
                options: options,
                float_options_string: float_options_string,
                float_options_val: float_options_val,
                talent_string: talent_string,
                talent_val: talent_val,
            };

            let result = obj.simulate_mult(wow_input);
            document.getElementById("output1").innerHTML = result['messages'].get(0);
            document.getElementById("output2").innerHTML = "";
            if (document.getElementById("display_multi_debug").checked) {
                document.getElementById("output2").innerHTML = result['messages'].get(1);
            }
            document.getElementById("output3").innerHTML = "";
            document.getElementById("output4").innerHTML = "";

        } else {
            let wow_input = {
                race: race_vec,
                armor: armor_vec,
                weapons: weapons_vec,
                buffs: buff_vec,
                enchants: ench_vec,
                stat_weights: stat_weight_vec,
                options: options,
                float_options_string: float_options_string,
                float_options_val: float_options_val,
                talent_string: talent_string,
                talent_val: talent_val,
                compare_armor: compare_armor_vec,
                compare_weapons: compare_weapons_vec,
                mult_armor: mult_armor_vec,
            };

            let result = obj.simulate(wow_input);

            obj.delete();

            let mean_dps = [];
            let std_dps = [];
            for (let i = 0; i < result['mean_dps'].size(); i++) {
                mean_dps.push(result['mean_dps'].get(i).toFixed(2));
                std_dps.push(result['std_dps'].get(i).toFixed(2));
            }

            let n_sim_status = "";
            if (mean_dps.length === 1) {
                let conf_interval = 1.96 * std_dps[0];
                n_sim_status += 'DPS: <b>' + mean_dps[0] + ' &plusmn ' + conf_interval.toPrecision(3) + '</b> (95% confidence interval)<br>';
            } else {
                for (let i = 0; i < mean_dps.length; i++) {
                    let j = i + 1;
                    let conf_interval = 1.96 * std_dps[i];
                    n_sim_status += 'DPS setup' + j + ': <b>' + mean_dps[i] + ' &plusmn ' +
                        conf_interval.toPrecision(3) + '</b> (95% confidence interval)<br>';
                }
            }

            n_sim_status += "Simulations for DPS = <b>" + n_simulations + "</b><br>" +
                "Simulations for stat weights = <b>" + (total_simulations - n_simulations) +
                "</b><br>Total simulations: <b>" + total_simulations + "</b><br> ";
            if (!document.getElementById("debug_on").checked) {
                n_sim_status += "(Hint: Combat logs can be activated in 'Simulation settings')"
            }

            document.getElementById("output1").innerHTML = n_sim_status;

            document.getElementById("output3").innerHTML = result['messages'].get(0);

            let stat_weights = [];
            if (result['stat_weights'].size() > 0) {
                let ap_string = result['stat_weights'].get(0);
                ap_string = ap_string.split(" ");
                let p_val_p = parseFloat(ap_string[1]) + 1.96 * parseFloat(ap_string[2]);
                let p_val_n = parseFloat(ap_string[1]) - 1.96 * parseFloat(ap_string[2]);
                let n_val_p = parseFloat(ap_string[3]) - 1.96 * parseFloat(ap_string[4]);
                let n_val_n = parseFloat(ap_string[3]) + 1.96 * parseFloat(ap_string[4]);
                stat_weights.push({
                    'name': "100 AP",
                    'value_max': Math.max(p_val_p, p_val_n),
                    'value_min': Math.min(p_val_p, p_val_n),
                    'negative_value_max': Math.max(n_val_p, n_val_n),
                    'negative_value_min': Math.min(n_val_p, n_val_n)
                });
                let dps_per_ap = parseFloat(ap_string[1]) / 100;
                for (let i = 1; i < result['stat_weights'].size(); i++) {
                    let stat_string = result['stat_weights'].get(i);
                    stat_string = stat_string.split(" ");
                    let p_val_p = (parseFloat(stat_string[1]) + 1.96 * parseFloat(stat_string[2])) / dps_per_ap;
                    let p_val_n = (parseFloat(stat_string[1]) - 1.96 * parseFloat(stat_string[2])) / dps_per_ap;
                    let n_val_p = (parseFloat(stat_string[3]) - 1.96 * parseFloat(stat_string[4])) / dps_per_ap;
                    let n_val_n = (parseFloat(stat_string[3]) + 1.96 * parseFloat(stat_string[4])) / dps_per_ap;
                    stat_weights.push({
                        'name': stat_string[0],
                        'value_max': Math.max(p_val_p, p_val_n),
                        'value_min': Math.min(p_val_p, p_val_n),
                        'negative_value_max': Math.max(n_val_p, n_val_n),
                        'negative_value_min': Math.min(n_val_p, n_val_n)
                    });
                }
            }

            let string = "<b>Stat weights:</b> <br />";
            if (document.getElementById("do_comparison").checked) {
                string = "<b>Stat weights (Setup 1):</b> <br />";
            }
            string += "(Accuracy is based on the 'number of simulations per stat weight' value.)<br>";
            if (result['stat_weights'].size() > 0) {
                string += "+" + stat_weights[0]['name'] + " equivalates: <b>" + stat_weights[0]['value_min'].toFixed(2) +
                    " &#8722 " + stat_weights[0]['value_max'].toFixed(2) + "</b> DPS. <br />";
                if (stat_weights[0]['name'] !== '1%ExtraAttack') {
                    string += "-" + stat_weights[0]['name'] + " equivalates: <b>" + stat_weights[0]['negative_value_min'].toFixed(2) +
                        " &#8722 " + stat_weights[0]['negative_value_max'].toFixed(2) + "</b> DPS. <br />";
                }
                string += "<br />";

                for (let i = 1; i < stat_weights.length; i++) {
                    string += "+" + stat_weights[i]['name'] + " equivalates: <b>" + stat_weights[i]['value_min'].toFixed(2) +
                        " &#8722 " + stat_weights[i]['value_max'].toFixed(2) + "</b> attack power. <br />";
                    if (stat_weights[i]['name'] !== '1%ExtraAttack') {
                        string += "-" + stat_weights[i]['name'] + " equivalates: <b>" + stat_weights[i]['negative_value_min'].toFixed(2) +
                            " &#8722 " + stat_weights[i]['negative_value_max'].toFixed(2) + "</b> attack power. <br />";
                    }
                    string += "<br />";
                }
            }
            document.getElementById("output2").innerHTML = string;

            // Crit cap details:
            document.getElementById("output4").innerHTML = result['extra_stats'].get(0);

            if (document.getElementById("debug_on").checked) {
                document.getElementById("combat_debug").style.display = "block";
                document.getElementById("combat_debug_title").innerHTML = "<b>Combat log from the median fight: </b>";
            } else {
                document.getElementById("combat_debug").style.display = "none";
                document.getElementById("combat_debug_title").innerHTML = "";
            }
            document.getElementById("combat_debug").innerHTML = result['extra_stats'].get(1);

            let aura_name = [];
            let aura_uptimes = [];
            for (let i = 0; i < result['aura_uptimes'].size(); i++) {
                let aura_string = result['aura_uptimes'].get(i);
                let split_string = aura_string.split(" ");
                aura_name.push(split_string[0]);
                aura_uptimes.push(parseFloat(split_string[1]));
            }

            let aura_list = [];
            for (let j = 0; j < aura_name.length; j++)
                aura_list.push({'name': aura_name[j], 'duration': aura_uptimes[j]});

            aura_list.sort(function (a, b) {
                return ((a.duration > b.duration) ? -1 : ((a.duration === b.duration) ? 0 : 1));
            });

            for (let k = 0; k < aura_list.length; k++) {
                aura_name[k] = aura_list[k].name;
                aura_uptimes[k] = aura_list[k].duration;
            }

            let proc_list = [];
            let proc_name = [];
            let proc_counter = [];
            for (let i = 0; i < result['proc_counter'].size(); i++) {
                let proc_string = result['proc_counter'].get(i);
                let split_string = proc_string.split(" ");
                proc_list.push({'name': split_string[0], 'counter': parseFloat(split_string[1])});
            }

            proc_list.sort(function (a, b) {
                return ((a.counter > b.counter) ? -1 : ((a.counter === b.counter) ? 0 : 1));
            });

            for (let k = 0; k < proc_list.length; k++) {
                proc_name[k] = proc_list[k].name;
                proc_counter[k] = proc_list[k].counter;
            }

            let colors = ["#3e95cd", "#8e5ea2", "#FFFF00", "#c45850",
                "#e8c3b9", "#990099", "#145A32", "#3333cc",
                "#c45000", "#00FF08", "#FF000A", "#ffffff",
                "#abc46b", "#f75fff", "#5cffeb", "#beff5b"];
            let damage_name = [];
            let damage_vec = [];
            for (let i = 0; i < result["time_lapse_names"].size(); i++) {
                damage_name.push(result["time_lapse_names"].get(i));
                damage_vec.push([]);
                let damage_source_vec = result["damage_time_lapse"].get(i);
                if (i === 0) {
                    for (let j = 0; j < damage_source_vec.size(); j++) {
                        damage_vec[i].push(damage_source_vec.get(j));
                    }
                } else {
                    for (let j = 0; j < damage_source_vec.size(); j++) {
                        damage_vec[i].push(damage_source_vec.get(j) + damage_vec[i - 1][j]);
                    }
                }
            }

            let cumulative_vec = [];
            for (let i = 0; i < result["time_lapse_names"].size(); i++) {
                cumulative_vec.push([]);
                cumulative_vec[i][0] = damage_vec[i][0];
                for (let j = 1; j < damage_vec[i].length; j++) {
                    cumulative_vec[i].push(cumulative_vec[i][j - 1] + damage_vec[i][j]);
                }
            }

            let sources = [];
            for (let i = 0; i < result["time_lapse_names"].size(); i++) {
                sources.push(mean_dps[0] * result['dmg_sources'].get(i));
            }

            let time_stamps = [];
            time_stamps.push(0);
            for (let j = 1; j < damage_vec[0].length; j++) {
                time_stamps.push(time_stamps[j - 1] + .50);
            }

            let hist_x = [];
            let hist_y = [];
            for (let i = 0; i < result['hist_x'].size(); i++) {
                hist_x.push(result['hist_x'].get(i));
                hist_y.push(result['hist_y'].get(i));
            }

            let data_damage_time_lapse = [];
            for (let i = 0; i < damage_vec.length; i++) {
                data_damage_time_lapse.push(
                    {
                        data: damage_vec[i],
                        label: damage_name[i],
                        borderWidth: 10,
                        borderColor: colors[i],
                        backgroundColor: colors[i],
                        pointRadius: 0.1,
                        fill: origin
                    }
                )
            }

            let data_damage_time_lapse_cum = [];
            for (let i = 0; i < damage_vec.length; i++) {
                data_damage_time_lapse_cum.push(
                    {
                        data: cumulative_vec[i],
                        label: damage_name[i],
                        borderWidth: 10,
                        borderColor: colors[i],
                        backgroundColor: colors[i],
                        pointRadius: 0.1,
                        fill: origin
                    }
                )
            }

            let use_effect_data = [];
            for (let i = result['use_effect_order_string'].size() - 1; i >= 0; i--) {
                let aura_string = result['use_effect_order_string'].get(i);
                let split_string = aura_string.split(" ");
                let use_effect_name = split_string[0];
                let start_time = parseFloat(split_string[1]);
                let duration = parseFloat(split_string[2]);
                let found_effect = false;
                for (let use_effect of use_effect_data) {
                    if (use_effect['name'] === use_effect_name) {
                        let sum_times = 0.0;
                        for (let previous_start_time of use_effect['start_time']) {
                            if (previous_start_time + duration >= 0.0) {
                                sum_times += previous_start_time + duration;
                            }
                        }
                        // use_effect['start_time'].push(delta_start_time);
                        use_effect['start_time'].push(start_time - sum_times);
                        found_effect = true;
                    }
                }
                if (!found_effect) {
                    use_effect_data.push(
                        {
                            'name': use_effect_name,
                            'start_time': [start_time],
                            'duration': duration,
                        }
                    );
                }
            }
            let longest_data_set = 0;
            let n_data_set = use_effect_data.length;
            for (let use_effect of use_effect_data) {
                if (use_effect['start_time'].length > longest_data_set) {
                    longest_data_set = use_effect['start_time'].length;
                }
            }
            let use_effect_plot = [];
            let use_effect_colors = [];
            let use_effect_labels = [];
            for (let i = 0; i < 2 * longest_data_set; ++i) {
                use_effect_plot.push([]);
                use_effect_colors.push([]);
            }
            for (let i = 0; i < n_data_set; ++i) {
                use_effect_labels.push(use_effect_data[i]['name']);
                let j = 0;
                let duration = use_effect_data[i]['duration'];
                for (let start_time of use_effect_data[i]['start_time']) {
                    if (start_time < 0.0) {
                        if (duration + start_time < 0.0) {
                            use_effect_plot[j].push(start_time + duration);
                            use_effect_plot[j + 1].push(-duration);
                            use_effect_colors[j].push("rgba(255,255,250,0)");
                            use_effect_colors[j + 1].push(colors[i]);
                        } else {
                            use_effect_plot[j].push(start_time);
                            use_effect_plot[j + 1].push(duration + start_time);
                            use_effect_colors[j].push(colors[i]);
                            use_effect_colors[j + 1].push(colors[i]);
                        }
                    } else {
                        use_effect_plot[j].push(start_time);
                        use_effect_plot[j + 1].push(duration);
                        use_effect_colors[j].push("rgba(255,255,250,0)");
                        use_effect_colors[j + 1].push(colors[i]);
                    }
                    j += 2;
                }
                while (j < 2 * longest_data_set) {
                    use_effect_plot[j].push(0);
                    use_effect_plot[j + 1].push(0);
                    use_effect_colors[j].push("rgba(255,255,250,0)");
                    use_effect_colors[j + 1].push("rgba(255,255,250,0)");
                    j += 2;
                }
            }

            let use_effect_datasets = [];
            for (let i = 0; i < use_effect_plot.length; i++) {
                use_effect_datasets.push(
                    {
                        'data': use_effect_plot[i],
                        'backgroundColor': use_effect_colors[i]
                    }
                )
            }

            Chart.defaults.global.defaultFontSize = 36;
            Chart.defaults.global.defaultFontStyle = 'Bold';
            Chart.defaults.scale.gridLines.color = "black";

            line_chart_hist = new Chart(document.getElementById("line-chart-hist"), {
                type: 'line',
                data: {
                    labels: hist_x,
                    datasets: [{
                        data: hist_y,
                        label: "Simulator results",
                        borderWidth: 10,
                        borderColor: "#3e95cd",
                        fill: origin,
                        backgroundColor: "#3e95cd"
                    }]
                },
                options: {
                    legend: {
                        labels: {
                            fontColor: "black",
                        }
                    },
                    title: {
                        fontSize: 60,
                        fontColor: "black",
                        display: true,
                        text: 'Damage histogram'
                    },
                    scales: {
                        yAxes: [{
                            gridLines: {
                                color: "rgba(0, 0, 0, 0.5)",
                            },
                            ticks: {
                                fontColor: "black",
                            },
                            scaleLabel: {
                                display: true,
                                labelString: 'Frequency',
                                fontColor: "black",
                            }
                        }],
                        xAxes: [{
                            gridLines: {
                                color: "rgba(0, 0, 0, 0.5)",
                            },
                            ticks: {
                                fontColor: "black",
                                maxTicksLimit: 30,
                                maxRotation: 0
                            },
                            scaleLabel: {
                                fontColor: "black",
                                display: true,
                                labelString: 'DPS'
                            }
                        }]
                    }
                }
            });

            let canvas = document.getElementById("line-chart-hist");
            canvas.maintainAspectRatio = true;
            canvas.style.height = '450px';
            canvas.style.width = '675px';

            line_chart_fight = new Chart(document.getElementById("line-chart-fight"), {
                type: 'line',
                data: {
                    labels: time_stamps,
                    datasets: data_damage_time_lapse
                },
                options: {
                    legend: {
                        labels: {
                            fontColor: "black",
                        }
                    },
                    bezierCurve: false,
                    title: {
                        fontSize: 60,
                        fontColor: "black",
                        display: true,
                        text: 'Fight time lapse (DPS)'
                    },
                    scales: {
                        yAxes: [{
                            gridLines: {
                                color: "rgba(0, 0, 0, 0)",
                            },
                            ticks: {
                                fontColor: "black",
                            },
                            scaleLabel: {
                                fontColor: "black",
                                display: true,
                                labelString: 'Average damage'
                            }
                        }],
                        xAxes: [{
                            gridLines: {
                                color: "rgba(0, 0, 0, 0)",
                            },
                            ticks: {
                                autoSkip: true,
                                maxTicksLimit: 30,
                                maxRotation: 0,
                                fontColor: "black",
                            },
                            scaleLabel: {
                                fontColor: "black",
                                display: true,
                                labelString: 'Time'
                            }
                        }],
                    }
                }
            });

            canvas = document.getElementById("line-chart-fight");
            canvas.maintainAspectRatio = true;
            canvas.responsive = false;
            canvas.style.height = '450px';
            canvas.style.width = '675px';

            line_chart_fight_cum = new Chart(document.getElementById("line-chart-fight-cumulative"), {
                type: 'line',
                data: {
                    labels: time_stamps,
                    datasets: data_damage_time_lapse_cum
                },
                options: {
                    legend: {
                        labels: {
                            fontColor: "black",
                        }
                    },
                    title: {
                        fontSize: 60,
                        fontColor: "black",
                        display: true,
                        text: 'Fight time lapse'
                    },
                    scales: {
                        yAxes: [{
                            gridLines: {
                                color: "rgba(0, 0, 0, 0)",
                            },
                            scaleLabel: {
                                fontColor: "black",
                                display: true,
                                labelString: 'Cumulative damage'
                            },
                            ticks: {
                                fontColor: "black",
                            },
                        }],
                        xAxes: [{
                            gridLines: {
                                color: "rgba(0, 0, 0, 0)",
                            },
                            ticks: {
                                fontColor: "black",
                                maxTicksLimit: 30,
                                maxRotation: 0
                            },
                            scaleLabel: {
                                fontColor: "black",
                                display: true,
                                labelString: 'Time'
                            }
                        }]
                    }
                }
            });

            canvas = document.getElementById("line-chart-fight-cumulative");
            canvas.maintainAspectRatio = true;
            canvas.style.height = '450px';
            canvas.style.width = '675px';

            bar_chart_cooldowns = new Chart(document.getElementById("bar-chart-cooldowns").getContext("2d"), {
                type: 'horizontalBar',
                data: {
                    labels: use_effect_labels,
                    datasets: use_effect_datasets
                },
                options: {
                    legend: {display: false},
                    title: {
                        fontSize: 60,
                        fontColor: "black",
                        display: true,
                        text: 'Use Effect Schedule'
                    },
                    scales: {
                        yAxes: [{
                            stacked: true,
                            fontColor: "black",
                            gridLines: {
                                color: "rgba(0, 0, 0, 0)",
                            },
                            scaleLabel: {
                                fontColor: "black",
                                display: true,
                                labelString: 'Use Effect'
                            },
                            ticks:
                                {
                                    fontColor: "black",
                                    beginAtZero: true,
                                    suggestedMin: 0,
                                }
                        }],
                        xAxes: [{
                            stacked: true,
                            fontColor: "black",
                            gridLines: {
                                color: "rgba(0, 0, 0, 0)",
                            },
                            scaleLabel: {
                                fontColor: "black",
                                display: true,
                                labelString: 'Time'
                            },
                            ticks:
                                {
                                    fontColor: "black",
                                    beginAtZero: true,
                                    suggestedMin: 0,
                                }
                        }]
                    }
                }
            });

            canvas = document.getElementById("bar-chart-cooldowns");
            canvas.maintainAspectRatio = true;
            canvas.responsive = false;
            canvas.style.height = '450px';
            canvas.style.width = '675px';

            // Bar chart
            bar_chart_damage = new Chart(document.getElementById("bar-chart-damage"), {
                type: 'bar',
                data: {
                    labels: damage_name,
                    datasets: [
                        {
                            backgroundColor: colors,
                            data: sources
                        }
                    ]
                },
                options: {
                    legend: {display: false},
                    title: {
                        fontSize: 60,
                        fontColor: "black",
                        display: true,
                        text: 'DPS from different sources'
                    },
                    scales: {
                        yAxes: [{
                            fontColor: "black",
                            gridLines: {
                                color: "rgba(0, 0, 0, 0)",
                            },
                            scaleLabel: {
                                fontColor: "black",
                                display: true,
                                labelString: 'DPS'
                            },
                            ticks:
                                {
                                    fontColor: "black",
                                    beginAtZero: true,
                                    suggestedMin: 0,
                                }
                        }],
                        xAxes: [{
                            fontColor: "black",
                            gridLines: {
                                color: "rgba(0, 0, 0, 0)",
                            },
                            scaleLabel: {
                                fontColor: "black",
                                display: false,
                            },
                            ticks:
                                {
                                    fontColor: "black",
                                    beginAtZero: true,
                                    suggestedMin: 0,
                                }
                        }]
                    }
                }
            });

            canvas = document.getElementById("bar-chart-damage");
            canvas.maintainAspectRatio = true;
            canvas.style.height = '450px';
            canvas.style.width = '675px';

            // Bar chart
            bar_chart_auras = new Chart(document.getElementById("bar-chart-auras"), {
                type: 'bar',
                data: {
                    labels: aura_name,
                    datasets: [
                        {
                            backgroundColor: colors,
                            data: aura_uptimes
                        }
                    ]
                },
                options: {
                    legend: {display: false},
                    title: {
                        fontColor: "black",
                        fontSize: 60,
                        display: true,
                        text: 'Aura uptime'
                    },
                    scales: {
                        yAxes: [{
                            gridLines: {
                                color: "rgba(0, 0, 0, 0)",
                            },
                            scaleLabel: {
                                fontColor: "black",
                                display: true,
                                labelString: '%',
                            },
                            ticks:
                                {
                                    fontColor: "black",
                                    beginAtZero: true,
                                    suggestedMin: 0,
                                }
                        }],
                        xAxes: [{
                            gridLines: {
                                color: "rgba(0, 0, 0, 0)",
                            },
                            ticks:
                                {
                                    fontColor: "black",
                                    beginAtZero: true,
                                }
                        }],
                    }
                }
            });

            canvas = document.getElementById("bar-chart-auras");
            canvas.maintainAspectRatio = true;
            canvas.style.height = '450px';
            canvas.style.width = '675px';

            // Bar chart
            bar_chart_proc = new Chart(document.getElementById("bar-chart-proc"), {
                type: 'bar',
                data: {
                    labels: proc_name,
                    datasets: [
                        {
                            backgroundColor: colors,
                            data: proc_counter
                        }
                    ]
                },
                options: {
                    legend: {display: false},
                    title: {
                        fontColor: "black",
                        fontSize: 60,
                        display: true,
                        text: 'Average # of procs'
                    },
                    scales: {
                        yAxes: [{
                            gridLines: {
                                color: "rgba(0, 0, 0, 0)",
                            },
                            scaleLabel: {
                                fontColor: "black",
                                display: true,
                            },
                            ticks:
                                {
                                    fontColor: "black",
                                    beginAtZero: true,
                                }
                        }],
                        xAxes: [{
                            gridLines: {
                                fontColor: "black",
                                color: "rgba(0, 0, 0, 0)",
                            },
                            ticks:
                                {
                                    fontColor: "black",
                                    beginAtZero: true,
                                }
                        }],
                    }
                }
            });

            canvas = document.getElementById("bar-chart-proc");
            canvas.maintainAspectRatio = true;
            canvas.responsive = false;
            canvas.style.height = '450px';
            canvas.style.width = '675px';
        }
    }
</script>
</body>
</html>